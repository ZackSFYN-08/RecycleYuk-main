{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/RecycleYuk-revision/RecycleYuk/RecycleYuk/src/utils/enhancedHelpers.js"],"sourcesContent":["// Helper functions untuk enhance existing features di RecycleYuk\r\n\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\r\n\r\n// Enhanced Reward Points Calculation\r\nexport const calculateRewardPoints = (totalWeight) => {\r\n    const basePoints = Math.floor(totalWeight * 10); // 10 poin per kg\r\n\r\n    // Bonus untuk milestone\r\n    let bonus = 0;\r\n    if (totalWeight >= 100) bonus += 500; // Bonus 500 poin untuk 100kg+\r\n    if (totalWeight >= 50) bonus += 200;  // Bonus 200 poin untuk 50kg+\r\n    if (totalWeight >= 20) bonus += 50;   // Bonus 50 poin untuk 20kg+\r\n\r\n    return basePoints + bonus;\r\n};\r\n\r\n// Get Reward Badge based on points\r\nexport const getRewardBadge = (points) => {\r\n    if (points >= 5000) return { level: 'Diamond', color: 'bg-purple-500', icon: 'ðŸ’Ž' };\r\n    if (points >= 2000) return { level: 'Gold', color: 'bg-yellow-500', icon: 'ðŸ¥‡' };\r\n    if (points >= 1000) return { level: 'Silver', color: 'bg-gray-400', icon: 'ðŸ¥ˆ' };\r\n    if (points >= 500) return { level: 'Bronze', color: 'bg-orange-600', icon: 'ðŸ¥‰' };\r\n    return { level: 'Starter', color: 'bg-green-500', icon: 'ðŸŒ±' };\r\n};\r\n\r\n// Format Rupiah Currency\r\nexport const formatRupiah = (amount) => {\r\n    return new Intl.NumberFormat('id-ID', {\r\n        style: 'currency',\r\n        currency: 'IDR',\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 0\r\n    }).format(amount);\r\n};\r\n\r\n// Calculate Driver Earnings\r\nexport const calculateDriverEarnings = (transactions) => {\r\n    const completedTransactions = transactions.filter(t => t.status === 'done');\r\n\r\n    const earnings = {\r\n        today: 0,\r\n        thisWeek: 0,\r\n        thisMonth: 0,\r\n        total: 0,\r\n        transactionCount: completedTransactions.length\r\n    };\r\n\r\n    const now = new Date();\r\n    const todayStart = new Date(now.setHours(0, 0, 0, 0));\r\n    const weekStart = new Date(now.setDate(now.getDate() - now.getDay()));\r\n    const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);\r\n\r\n    completedTransactions.forEach(t => {\r\n        const transactionDate = new Date(t.created_at);\r\n        const earning = (t.total_price || 0) * 0.15; // Driver gets 15% of each transaction\r\n\r\n        earnings.total += earning;\r\n\r\n        if (transactionDate >= todayStart) {\r\n            earnings.today += earning;\r\n        }\r\n        if (transactionDate >= weekStart) {\r\n            earnings.thisWeek += earning;\r\n        }\r\n        if (transactionDate >= monthStart) {\r\n            earnings.thisMonth += earning;\r\n        }\r\n    });\r\n\r\n    return earnings;\r\n};\r\n\r\n// Enhanced Statistics Calculation\r\nexport const calculateEnhancedStats = (transactions, userRole) => {\r\n    const stats = {\r\n        total: transactions.length,\r\n        pending: transactions.filter(t => t.status === 'Pending').length,\r\n        inProgress: transactions.filter(t => t.status === 'In Progress').length,\r\n        completed: transactions.filter(t => t.status === 'done').length,\r\n        totalWeight: transactions.reduce((sum, t) => sum + (Number(t.weight) || 0), 0),\r\n        totalRevenue: transactions.reduce((sum, t) => sum + (t.total_price || 0), 0)\r\n    };\r\n\r\n    // Calculate trend (last 7 days vs previous 7 days)\r\n    const now = new Date();\r\n    const sevenDaysAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n    const fourteenDaysAgo = new Date(now.getTime() - 14 * 24 * 60 * 60 * 1000);\r\n\r\n    const recentTransactions = transactions.filter(t => new Date(t.created_at) >= sevenDaysAgo);\r\n    const previousTransactions = transactions.filter(t => {\r\n        const date = new Date(t.created_at);\r\n        return date >= fourteenDaysAgo && date < sevenDaysAgo;\r\n    });\r\n\r\n    stats.trend = {\r\n        transactions: recentTransactions.length - previousTransactions.length,\r\n        weight: recentTransactions.reduce((sum, t) => sum + (Number(t.weight) || 0), 0) -\r\n            previousTransactions.reduce((sum, t) => sum + (Number(t.weight) || 0), 0)\r\n    };\r\n\r\n    return stats;\r\n};\r\n\r\n// Export Report Data\r\nexport const exportToExcel = async (data, filename) => {\r\n    try {\r\n        // Convert data to CSV format\r\n        const headers = Object.keys(data[0] || {});\r\n        const csvContent = [\r\n            headers.join(','),\r\n            ...data.map(row => headers.map(header => `\"${row[header] || ''}\"`).join(','))\r\n        ].join('\\n');\r\n\r\n        // Create blob and download\r\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n        const link = document.createElement('a');\r\n        const url = URL.createObjectURL(blob);\r\n\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', `${filename}_${new Date().toISOString().split('T')[0]}.csv`);\r\n        link.style.visibility = 'hidden';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Export error:', error);\r\n        return false;\r\n    }\r\n};\r\n\r\n// Real-time Notification Helper\r\nexport const sendNotification = async (userId, title, message, type = 'info') => {\r\n    try {\r\n        const { error } = await supabase.from('notifications').insert({\r\n            profile_id: userId,\r\n            title,\r\n            message,\r\n            type,\r\n            is_read: false\r\n        });\r\n\r\n        if (error) throw error;\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Notification error:', error);\r\n        return false;\r\n    }\r\n};\r\n\r\n// Validate NIK (Indonesian ID Number)\r\nexport const validateNIK = (nik) => {\r\n    return /^\\d{16}$/.test(nik);\r\n};\r\n\r\n// Validate Phone Number (Indonesian)\r\nexport const validatePhone = (phone) => {\r\n    return /^(\\+62|62|0)[0-9]{9,12}$/.test(phone);\r\n};\r\n\r\n// Get Status Color Class\r\nexport const getStatusColor = (status) => {\r\n    const statusLower = (status || '').toLowerCase();\r\n\r\n    const colorMap = {\r\n        'done': 'bg-green-100 text-green-700 border-green-300',\r\n        'selesai': 'bg-green-100 text-green-700 border-green-300',\r\n        'resolved': 'bg-green-100 text-green-700 border-green-300',\r\n        'in progress': 'bg-blue-100 text-blue-700 border-blue-300',\r\n        'proses': 'bg-blue-100 text-blue-700 border-blue-300',\r\n        'pending': 'bg-yellow-100 text-yellow-700 border-yellow-300',\r\n        'menunggu': 'bg-yellow-100 text-yellow-700 border-yellow-300',\r\n        'canceled': 'bg-red-100 text-red-700 border-red-300',\r\n        'dibatalkan': 'bg-red-100 text-red-700 border-red-300'\r\n    };\r\n\r\n    return colorMap[statusLower] || 'bg-gray-100 text-gray-700 border-gray-300';\r\n};\r\n\r\n// Calculate Distance between two coordinates (Haversine formula)\r\nexport const calculateDistance = (lat1, lon1, lat2, lon2) => {\r\n    const R = 6371; // Radius of the Earth in km\r\n    const dLat = (lat2 - lat1) * Math.PI / 180;\r\n    const dLon = (lon2 - lon1) * Math.PI / 180;\r\n\r\n    const a =\r\n        Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\r\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n\r\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    const distance = R * c; // Distance in km\r\n\r\n    return distance.toFixed(2);\r\n};\r\n\r\n// Estimate Time of Arrival based on distance\r\nexport const estimateETA = (distanceInKm) => {\r\n    const avgSpeed = 30; // km/h average speed in city\r\n    const timeInHours = distanceInKm / avgSpeed;\r\n    const timeInMinutes = Math.ceil(timeInHours * 60);\r\n\r\n    if (timeInMinutes < 60) {\r\n        return `${timeInMinutes} Menit`;\r\n    } else {\r\n        const hours = Math.floor(timeInMinutes / 60);\r\n        const minutes = timeInMinutes % 60;\r\n        return `${hours} Jam ${minutes} Menit`;\r\n    }\r\n};\r\n\r\n// Generate Random Color for Charts\r\nexport const generateChartColors = (count) => {\r\n    const colors = [\r\n        '#10b981', '#3b82f6', '#f59e0b', '#ef4444', '#8b5cf6',\r\n        '#ec4899', '#14b8a6', '#f97316', '#6366f1', '#84cc16'\r\n    ];\r\n\r\n    return Array.from({ length: count }, (_, i) => colors[i % colors.length]);\r\n};\r\n\r\n// Filter Transactions by Date Range\r\nexport const filterByDateRange = (transactions, startDate, endDate) => {\r\n    if (!startDate || !endDate) return transactions;\r\n\r\n    const start = new Date(startDate);\r\n    const end = new Date(endDate);\r\n    end.setHours(23, 59, 59, 999); // Include entire end day\r\n\r\n    return transactions.filter(t => {\r\n        const transactionDate = new Date(t.created_at);\r\n        return transactionDate >= start && transactionDate <= end;\r\n    });\r\n};\r\n\r\n// Group Transactions by Period\r\nexport const groupByPeriod = (transactions, period = 'day') => {\r\n    const groups = {};\r\n\r\n    transactions.forEach(t => {\r\n        const date = new Date(t.created_at);\r\n        let key;\r\n\r\n        switch (period) {\r\n            case 'hour':\r\n                key = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${date.getHours()}:00`;\r\n                break;\r\n            case 'day':\r\n                key = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\r\n                break;\r\n            case 'week':\r\n                const weekNum = Math.ceil(date.getDate() / 7);\r\n                key = `${date.getFullYear()}-${date.getMonth() + 1} Week ${weekNum}`;\r\n                break;\r\n            case 'month':\r\n                key = `${date.getFullYear()}-${date.getMonth() + 1}`;\r\n                break;\r\n            case 'year':\r\n                key = `${date.getFullYear()}`;\r\n                break;\r\n            default:\r\n                key = date.toISOString().split('T')[0];\r\n        }\r\n\r\n        if (!groups[key]) {\r\n            groups[key] = [];\r\n        }\r\n        groups[key].push(t);\r\n    });\r\n\r\n    return groups;\r\n};\r\n\r\n// Upload Avatar Helper\r\nexport const uploadAvatar = async (file, userId) => {\r\n    try {\r\n        const fileExt = file.name.split('.').pop();\r\n        const fileName = `${userId}-${Date.now()}.${fileExt}`;\r\n        const filePath = `${fileName}`;\r\n\r\n        const { error: uploadError } = await supabase.storage\r\n            .from('avatars')\r\n            .upload(filePath, file);\r\n\r\n        if (uploadError) {\r\n            throw uploadError;\r\n        }\r\n\r\n        const { data: { publicUrl } } = supabase.storage\r\n            .from('avatars')\r\n            .getPublicUrl(filePath);\r\n\r\n        return publicUrl;\r\n    } catch (error) {\r\n        console.error('Error uploading avatar:', error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport default {\r\n    uploadAvatar,\r\n    calculateRewardPoints,\r\n    getRewardBadge,\r\n    formatRupiah,\r\n    calculateDriverEarnings,\r\n    calculateEnhancedStats,\r\n    exportToExcel,\r\n    sendNotification,\r\n    validateNIK,\r\n    validatePhone,\r\n    getStatusColor,\r\n    calculateDistance,\r\n    estimateETA,\r\n    generateChartColors,\r\n    filterByDateRange,\r\n    groupByPeriod,\r\n    uploadAvatar\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/RecycleYuk-revision/RecycleYuk/RecycleYuk/src/components/shared/ChatModal.js"],"sourcesContent":["// src/components/shared/ChatModal.js\r\n// Shared chat component for User <-> Driver communication\r\n\r\n'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { X, Send, MessageCircle, User } from 'lucide-react';\r\n\r\nconst supabase = createClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n);\r\n\r\nexport default function ChatModal({ isOpen, onClose, transactionId, currentUserId, currentUserName, otherUserName, isDriver = false }) {\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const messagesEndRef = useRef(null);\r\n\r\n    // Fetch messages\r\n    const fetchMessages = async () => {\r\n        if (!transactionId) return;\r\n\r\n        const { data } = await supabase\r\n            .from('chat_messages')\r\n            .select('*')\r\n            .eq('transaction_id', transactionId)\r\n            .order('created_at', { ascending: true });\r\n\r\n        setMessages(data || []);\r\n    };\r\n\r\n    // Subscribe to realtime messages\r\n    useEffect(() => {\r\n        if (!isOpen || !transactionId) return;\r\n\r\n        fetchMessages();\r\n\r\n        const channel = supabase\r\n            .channel(`chat-${transactionId}`)\r\n            .on('postgres_changes', {\r\n                event: 'INSERT',\r\n                schema: 'public',\r\n                table: 'chat_messages',\r\n                filter: `transaction_id=eq.${transactionId}`\r\n            }, (payload) => {\r\n                setMessages(prev => [...prev, payload.new]);\r\n            })\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, [isOpen, transactionId]);\r\n\r\n    // Auto-scroll to bottom\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    // Send message\r\n    const handleSend = async (e) => {\r\n        e.preventDefault();\r\n        if (!newMessage.trim() || loading) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            await supabase.from('chat_messages').insert({\r\n                transaction_id: transactionId,\r\n                sender_id: currentUserId,\r\n                sender_name: currentUserName,\r\n                message: newMessage.trim(),\r\n                is_driver: isDriver\r\n            });\r\n            setNewMessage('');\r\n        } catch (err) {\r\n            console.error('Send message error:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-white rounded-2xl w-full max-w-md h-[500px] flex flex-col shadow-2xl animate-in zoom-in-95\">\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-r from-green-600 to-emerald-600 p-4 rounded-t-2xl flex items-center justify-between text-white\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center\">\r\n                            <MessageCircle size={20} />\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"font-bold\">Chat dengan {otherUserName}</h3>\r\n                            <p className=\"text-xs opacity-80\">Order #{transactionId?.slice(0, 8)}</p>\r\n                        </div>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-white/20 rounded-full transition\">\r\n                        <X size={20} />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Messages */}\r\n                <div className=\"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50\">\r\n                    {messages.length === 0 ? (\r\n                        <div className=\"text-center text-gray-400 py-8\">\r\n                            <MessageCircle size={40} className=\"mx-auto mb-2 opacity-30\" />\r\n                            <p>Belum ada pesan</p>\r\n                            <p className=\"text-xs\">Mulai percakapan sekarang</p>\r\n                        </div>\r\n                    ) : (\r\n                        messages.map((msg, i) => (\r\n                            <div\r\n                                key={msg.id || i}\r\n                                className={`flex ${msg.sender_id === currentUserId ? 'justify-end' : 'justify-start'}`}\r\n                            >\r\n                                <div className={`max-w-[75%] rounded-2xl px-4 py-2 ${msg.sender_id === currentUserId\r\n                                        ? 'bg-green-600 text-white rounded-br-md'\r\n                                        : 'bg-white text-gray-800 border border-gray-200 rounded-bl-md'\r\n                                    }`}>\r\n                                    <p className={`text-xs font-bold mb-0.5 ${msg.sender_id === currentUserId ? 'text-green-100' : 'text-gray-500'\r\n                                        }`}>\r\n                                        {msg.sender_name}\r\n                                    </p>\r\n                                    <p className=\"text-sm\">{msg.message}</p>\r\n                                    <p className={`text-[10px] mt-1 ${msg.sender_id === currentUserId ? 'text-green-200' : 'text-gray-400'\r\n                                        }`}>\r\n                                        {new Date(msg.created_at).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' })}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                    <div ref={messagesEndRef} />\r\n                </div>\r\n\r\n                {/* Input */}\r\n                <form onSubmit={handleSend} className=\"p-4 border-t border-gray-200 bg-white rounded-b-2xl\">\r\n                    <div className=\"flex gap-2\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={newMessage}\r\n                            onChange={(e) => setNewMessage(e.target.value)}\r\n                            placeholder=\"Ketik pesan...\"\r\n                            className=\"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 ring-green-500 outline-none text-gray-800\"\r\n                            disabled={loading}\r\n                        />\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading || !newMessage.trim()}\r\n                            className=\"bg-green-600 text-white px-4 py-3 rounded-xl hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                        >\r\n                            <Send size={20} />\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 664, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/RecycleYuk-revision/RecycleYuk/RecycleYuk/src/app/dashboard/driver/page.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { createClient } from '@supabase/supabase-js';\nimport {\n    LayoutDashboard, Truck, MapPin, CheckCircle, History, User,\n    LogOut, Menu, X, ChevronLeft, ChevronRight, Search,\n    Navigation, Clock, Calendar, CheckCircle2, AlertCircle, Package,\n    Loader2, Phone, MessageCircle, Wallet, DollarSign, TrendingUp, Download, Trophy, Bell, Recycle, Edit2\n} from 'lucide-react';\nimport Swal from 'sweetalert2';\nimport { calculateDriverEarnings, formatRupiah, exportToExcel, uploadAvatar } from '@/utils/enhancedHelpers';\nimport ChatModal from '@/components/shared/ChatModal';\n\n// --- OPENLAYERS IMPORTS ---\nimport 'ol/ol.css';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport TileLayer from 'ol/layer/Tile';\nimport OSM from 'ol/source/OSM';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport LineString from 'ol/geom/LineString';\nimport { fromLonLat } from 'ol/proj';\nimport { Icon, Style, Stroke, Circle as CircleStyle, Fill } from 'ol/style';\n\n// --- INISIALISASI SUPABASE ---\nconst supabase = createClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n);\n\n// Koordinat Default (Bandung) [Lon, Lat]\nconst CENTER_COORDS = [107.6191, -6.9175];\n\nexport default function DriverDashboard() {\n    const router = useRouter();\n\n    // --- 1. STATE MANAGEMENT ---\n    const [mounted, setMounted] = useState(false);\n    const [loading, setLoading] = useState(true);\n    const [currentTime, setCurrentTime] = useState('');\n\n    // GPS & Maps State\n    const [myLocation, setMyLocation] = useState(CENTER_COORDS);\n    const [isGpsActive, setIsGpsActive] = useState(false);\n\n    // UI States\n    const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n    const [activePage, setActivePage] = useState('dashboard');\n\n    // Data States\n    const [currentUser, setCurrentUser] = useState(null);\n    const [tasks, setTasks] = useState([]);\n    const [history, setHistory] = useState([]);\n    const [driverProfile, setDriverProfile] = useState(null);\n    const [totalIncome, setTotalIncome] = useState(0);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [taskFilter, setTaskFilter] = useState('pending'); // 'pending' or 'process'\n    const [isChatOpen, setIsChatOpen] = useState(false);\n    const [selectedChatTask, setSelectedChatTask] = useState(null);\n\n    // OpenLayers Refs\n    const mapElement = useRef();\n    const mapRef = useRef(null);\n    const vectorSourceRef = useRef(new VectorSource());\n\n    const SIDEBAR_MENUS = [\n        { id: 'dashboard', label: 'Ringkasan', icon: LayoutDashboard },\n        { id: 'tasks', label: 'Tugas Jemput', icon: Truck },\n        { id: 'map', label: 'Peta Lokasi', icon: MapPin },\n        { id: 'history', label: 'Riwayat', icon: History },\n        { id: 'earnings', label: 'Pendapatan', icon: Wallet },\n    ];\n\n    // --- 2. CORE LOGIC ---\n    useEffect(() => {\n        setMounted(true);\n        const timer = setInterval(() => {\n            setCurrentTime(new Date().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' }));\n        }, 1000);\n\n        fetchData();\n        startGpsTracking();\n\n        const channel = supabase\n            .channel('driver-dashboard')\n            .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'transactions' }, (payload) => {\n                // Play notification sound for new orders\n                try {\n                    const audio = new Audio('/sounds/notification.mp3');\n                    audio.volume = 0.5;\n                    audio.play().catch(() => { });\n                } catch (e) { }\n\n                // Show toast notification\n                Swal.fire({\n                    title: 'ðŸš› Order Baru!',\n                    text: 'Ada permintaan pickup baru menunggu Anda.',\n                    icon: 'info',\n                    toast: true,\n                    position: 'top-end',\n                    showConfirmButton: false,\n                    timer: 5000,\n                    timerProgressBar: true,\n                    background: '#ecfdf5',\n                    color: '#065f46'\n                });\n\n                fetchData();\n            })\n            .on('postgres_changes', { event: 'UPDATE', schema: 'public', table: 'transactions' }, () => {\n                fetchData();\n            })\n            .subscribe();\n\n        const handleResize = () => { if (window.innerWidth >= 768) setIsMobileMenuOpen(false); };\n        window.addEventListener('resize', handleResize);\n\n        return () => {\n            clearInterval(timer);\n            window.removeEventListener('resize', handleResize);\n            supabase.removeChannel(channel);\n        };\n    }, []);\n\n    // --- 3. GPS LOGIC (WATCH POSITION) ---\n    const [myHeading, setMyHeading] = useState(0);\n\n    const startGpsTracking = () => {\n        if (!navigator.geolocation) return;\n\n        // Menggunakan watchPosition agar lokasi terus terupdate realtime\n        navigator.geolocation.watchPosition(\n            async (position) => {\n                const { latitude, longitude, heading } = position.coords;\n                // OpenLayers menggunakan [Lon, Lat]\n                const newLoc = [longitude, latitude];\n                setMyLocation(newLoc);\n\n                if (heading !== null && !isNaN(heading)) {\n                    setMyHeading(heading * (Math.PI / 180)); // Convert to radians\n                }\n\n                setIsGpsActive(true);\n\n                // --- REALTIME UPDATE TO DB ---\n                // Broadcast lokasi driver ke tabel 'drivers'\n                if (driverProfile?.id) {\n                    try {\n                        await supabase.from('drivers').update({\n                            current_latitude: latitude,\n                            current_longitude: longitude,\n                            last_location_update: new Date()\n                        }).eq('id', driverProfile.id);\n                    } catch (err) {\n                        console.error(\"Gagal update lokasi driver:\", err);\n                    }\n                }\n            },\n            (err) => {\n                console.warn(\"GPS Error:\", err.message);\n            },\n            { enableHighAccuracy: true, maximumAge: 0, timeout: 10000 }\n        );\n    };\n\n    const centerToMyLocation = () => {\n        if (mapRef.current && isGpsActive) {\n            mapRef.current.getView().animate({ center: fromLonLat(myLocation), zoom: 17, duration: 1000 });\n        } else {\n            Swal.fire('GPS Mencari...', 'Pastikan izin lokasi aktif dan tunggu sinyal.', 'info');\n        }\n    };\n\n    // --- 4. MAP INITIALIZATION ---\n    useEffect(() => {\n        if (activePage === 'map' && mapElement.current && !mapRef.current) {\n\n            const vectorLayer = new VectorLayer({\n                source: vectorSourceRef.current,\n                zIndex: 100\n            });\n\n            const initialMap = new Map({\n                target: mapElement.current,\n                layers: [\n                    new TileLayer({ source: new OSM() }),\n                    vectorLayer\n                ],\n                view: new View({\n                    center: fromLonLat(CENTER_COORDS),\n                    zoom: 13\n                }),\n                controls: []\n            });\n\n            mapRef.current = initialMap;\n            updateMapMarkers();\n        }\n\n        return () => {\n            if (activePage !== 'map' && mapRef.current) {\n                mapRef.current.setTarget(null);\n                mapRef.current = null;\n            }\n        }\n    }, [activePage, mounted]);\n\n    // --- 5. UPDATE MAP MARKERS ---\n    const updateMapMarkers = () => {\n        if (!mapRef.current) return;\n\n        vectorSourceRef.current.clear();\n\n        // A. Marker Saya (Driver)\n        if (isGpsActive) {\n            // Marker Titik Biru (Akurasi)\n            const accuracyFeature = new Feature({ geometry: new Point(fromLonLat(myLocation)) });\n            accuracyFeature.setStyle(new Style({\n                image: new CircleStyle({\n                    radius: 8,\n                    fill: new Fill({ color: '#3b82f6' }),\n                    stroke: new Stroke({ color: '#fff', width: 2 })\n                })\n            }));\n            vectorSourceRef.current.addFeature(accuracyFeature);\n\n            // Marker Truk\n            const driverFeature = new Feature({ geometry: new Point(fromLonLat(myLocation)) });\n            driverFeature.setStyle(new Style({\n                image: new Icon({\n                    src: 'https://cdn-icons-png.flaticon.com/512/3096/3096673.png',\n                    scale: 0.08, anchor: [0.5, 1]\n                })\n            }));\n            vectorSourceRef.current.addFeature(driverFeature);\n        }\n\n        // B. Rute (Garis Hijau)\n        // Note: Icon Sampah sudah DIHAPUS sesuai permintaan\n        tasks.filter(t => t.status === 'Pending' || (t.status === 'Process' && t.driver_id === currentUser?.id)).forEach(t => {\n            if (t.lng && t.lat) {\n                const taskLoc = [t.lng, t.lat];\n\n                // HAPUS ICON SAMPAH (Tidak ada kode Feature Point untuk Task)\n\n                // Garis Rute (Hanya muncul jika sedang proses jemput & GPS aktif)\n                if (t.status === 'Process' && isGpsActive) {\n                    const routeFeature = new Feature({\n                        geometry: new LineString([fromLonLat(myLocation), fromLonLat(taskLoc)])\n                    });\n                    routeFeature.setStyle(new Style({\n                        stroke: new Stroke({ color: '#10B981', width: 4, lineDash: [10, 10] })\n                    }));\n                    vectorSourceRef.current.addFeature(routeFeature);\n                }\n            }\n        });\n    };\n\n    useEffect(() => {\n        updateMapMarkers();\n    }, [tasks, myLocation, isGpsActive, currentUser, activePage]);\n\n\n    // --- 4. DATA FETCHING ---\n\n\n    const fetchData = async () => {\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) { router.push('/login'); return; }\n\n            const { data: profile } = await supabase.from('profiles').select('*').eq('id', user.id).single();\n            setCurrentUser({ ...user, ...profile });\n\n            const { data: dProfile } = await supabase.from('drivers').select('*').eq('id', user.id).single();\n            if (dProfile) setDriverProfile(dProfile);\n\n            // 1. Ambil Wilayah Kerja Driver (Assigned Areas)\n            const { data: myAreas } = await supabase\n                .from('areas')\n                .select('*')\n                .eq('driver_id', user.id);\n\n            // 2. Ambil Task Aktif (Pending & Process)\n            // Fix: Gunakan relasi standar `profiles(...)` bukan alias `profiles:profile_id(...)` yang mungkin error jika tidak didefinisikan\n            const { data: activeTasks } = await supabase\n                .from('transactions')\n                .select(`*, profiles(full_name, address, rt, rw, phone), waste_types(name, price_per_kg)`)\n                .neq('status', 'Done')\n                .order('created_at', { ascending: true });\n\n            // 3. Filter Task Berdasarkan Wilayah Kerja\n            // Tampilkan task jika:\n            // a. Status 'Process' DAN diambil oleh driver ini (prioritas tertinggi, abaikan wilayah)\n            // b. Status 'Pending' DAN lokasi user (RT/RW) cocok dengan salah satu wilayah kerja driver\n            const filteredTasks = (activeTasks || []).filter(t => {\n                const isMyProcess = t.status === 'Process' && t.driver_id === user.id;\n\n                // Jika sedang diproses saya, pasti muncul\n                if (isMyProcess) return true;\n\n                // Jika status Pending, cek wilayah\n                if (t.status === 'Pending') {\n                    // Jika driver tidak punya wilayah, tampilkan SEMUA task pending (Mode Global/Demo)\n                    if (!myAreas || myAreas.length === 0) return true;\n\n                    const userRT = t.profiles?.rt;\n                    const userRW = t.profiles?.rw;\n\n                    // Cek apakah RT/RW user ada di list wilayah driver\n                    return myAreas.some(area =>\n                        area.rw == userRW &&\n                        (area.rt == userRT || !area.rt) // !area.rt berarti mencakup satu RW full\n                    );\n                }\n\n                return false;\n            });\n\n            // Generate Koordinat untuk Visualisasi Map\n            const tasksWithCoords = filteredTasks.map(t => {\n                // PRIORITAS: Gunakan Data Real dari Database\n                let finalLat = t.latitude;\n                let finalLng = t.longitude;\n\n                // FALLBACK: Jika Data Lama (latitude/longitude null), generate dummy di sekitar driver\n                // agar tidak error di map.\n                if (!finalLat || !finalLng) {\n                    finalLat = myLocation[1] + (Math.random() * 0.015 - 0.0075);\n                    finalLng = myLocation[0] + (Math.random() * 0.015 - 0.0075);\n                }\n\n                return {\n                    ...t,\n                    lat: finalLat,\n                    lng: finalLng\n                };\n            });\n\n            setTasks(tasksWithCoords);\n\n            // Hitung Pendapatan\n            const { data: historyData } = await supabase\n                .from('transactions')\n                .select('*, profiles(full_name, address), waste_types(name)')\n                .eq('status', 'Done')\n                .eq('driver_id', user.id)\n                .order('updated_at', { ascending: false });\n\n            setHistory(historyData || []);\n            const income = (historyData || []).reduce((acc, curr) => acc + (curr.total_price || 0), 0);\n            setTotalIncome(income);\n\n        } catch (err) {\n            console.error(\"Error data:\", err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const navigateTo = (pageId) => { setActivePage(pageId); setIsMobileMenuOpen(false); };\n    const handleLogout = async () => { await supabase.auth.signOut(); router.push('/login'); };\n\n    const contactUser = (type, phoneNumber, name) => {\n        if (!phoneNumber) return Swal.fire('Gagal', 'Nomor HP tidak tersedia.', 'error');\n        let formatted = phoneNumber.replace(/\\D/g, '');\n        if (formatted.startsWith('0')) formatted = '62' + formatted.slice(1);\n\n        if (type === 'whatsapp') {\n            const msg = `Halo Kak ${name}, saya Driver RecycleYuk sedang menuju lokasi.`;\n            window.open(`https://wa.me/${formatted}?text=${encodeURIComponent(msg)}`, '_blank');\n        } else {\n            window.open(`tel:${phoneNumber}`, '_self');\n        }\n    };\n\n    const handleTaskAction = async (taskId, action) => {\n        const myActiveTask = tasks.find(t => t.status === 'Process' && t.driver_id === currentUser.id);\n\n        // A. Jika Action = Process (Ambil Tugas)\n        if (action === 'Process') {\n            if (myActiveTask) return Swal.fire('Fokus!', 'Selesaikan tugas aktif dulu.', 'warning');\n\n            const result = await Swal.fire({\n                title: 'Ambil Tugas?',\n                icon: 'question',\n                showCancelButton: true,\n                confirmButtonText: 'Ya, Jemput!',\n                confirmButtonColor: '#10B981'\n            });\n\n            if (result.isConfirmed) {\n                try {\n                    await supabase.from('transactions').update({ status: 'Process', driver_id: currentUser.id }).eq('id', taskId);\n                    Swal.fire('Berhasil!', 'Segera menuju lokasi!', 'success');\n                    fetchData();\n                } catch (err) { Swal.fire('Gagal', err.message, 'error'); }\n            }\n        }\n\n        // B. Jika Action = Done (Selesaikan Tugas)\n        else if (action === 'Done') {\n            const taskToFinish = tasks.find(t => t.id === taskId);\n            const pricePerKg = taskToFinish?.waste_types?.price_per_kg || 0;\n            const wasteName = taskToFinish?.waste_types?.name || 'Sampah';\n\n            // Modal Input Berat Akhir\n            const { value: finalWeight } = await Swal.fire({\n                title: 'Selesaikan Tugas',\n                html: `\n                    <div style=\"text-align: left\">\n                        <p class=\"mb-2\">Jenis: <b>${wasteName}</b></p>\n                        <p class=\"mb-2\">Harga: <b>Rp ${pricePerKg.toLocaleString()}/kg</b></p>\n                        <label class=\"block text-sm font-bold mb-1\">Berat Aktual (Kg):</label>\n                    </div>\n                `,\n                input: 'number',\n                inputAttributes: {\n                    min: '0.1',\n                    step: '0.1',\n                    placeholder: 'Contoh: 5.5'\n                },\n                inputValue: taskToFinish?.weight || '',\n                showCancelButton: true,\n                confirmButtonText: 'Hitung & Selesai',\n                confirmButtonColor: '#3b82f6',\n                preConfirm: (weight) => {\n                    if (!weight || weight <= 0) {\n                        Swal.showValidationMessage('Masukkan berat yang valid!');\n                    }\n                    return weight;\n                }\n            });\n\n            if (finalWeight) {\n                const totalPrice = Math.round(parseFloat(finalWeight) * pricePerKg);\n\n                // Konfirmasi Akhir dengan Harga\n                const confirmResult = await Swal.fire({\n                    title: 'Konfirmasi Akhir',\n                    html: `\n                        <div class=\"text-center\">\n                            <p>Berat: <b>${finalWeight} Kg</b></p>\n                            <p class=\"text-xl font-bold text-green-600 mt-2\">Total: Rp ${totalPrice.toLocaleString()}</p>\n                        </div>\n                    `,\n                    icon: 'info',\n                    showCancelButton: true,\n                    confirmButtonText: 'Simpan & Selesai'\n                });\n\n                if (confirmResult.isConfirmed) {\n                    try {\n                        await supabase.from('transactions').update({\n                            status: 'Done',\n                            final_weight: parseFloat(finalWeight),\n                            total_price: totalPrice,\n                            weight: parseFloat(finalWeight) // Update estimasi weight jadi real weight juga\n                        }).eq('id', taskId);\n\n                        Swal.fire('Tugas Selesai!', `Saldo Rp ${totalPrice.toLocaleString()} dicatat.`, 'success');\n                        fetchData();\n                    } catch (err) { Swal.fire('Gagal', err.message, 'error'); }\n                }\n            }\n        }\n    };\n\n    const handleDriverStatusToggle = async () => {\n        if (!driverProfile) return;\n\n        // --- CEK VERIFIKASI ---\n        if (driverProfile.verification_status !== 'verified') {\n            return Swal.fire({\n                title: 'Akun Belum Terverifikasi',\n                text: 'Harap hubungi Admin untuk verifikasi akun sebelum mulai bekerja.',\n                icon: 'warning',\n                confirmButtonColor: '#F59E0B'\n            });\n        }\n\n        const newStatus = driverProfile.status === 'On Duty' ? 'Off Duty' : 'On Duty';\n        try {\n            await supabase.from('drivers').update({ status: newStatus }).eq('id', driverProfile.id);\n            setDriverProfile({ ...driverProfile, status: newStatus });\n            Swal.fire('Status', `Anda sekarang ${newStatus}`, 'success');\n        } catch (err) { Swal.fire('Error', 'Gagal update status', 'error'); }\n    };\n\n    const handleUpdateProfile = async (e) => {\n        e.preventDefault();\n        try {\n            await supabase.from('profiles').update({ full_name: currentUser.full_name, address: currentUser.address }).eq('id', currentUser.id);\n            if (driverProfile) await supabase.from('drivers').update({ name: currentUser.full_name, vehicle: driverProfile.vehicle }).eq('id', driverProfile.id);\n            Swal.fire('Sukses', 'Profil berhasil disimpan!', 'success');\n            fetchData();\n        } catch (err) { Swal.fire('Gagal', err.message, 'error'); }\n    };\n\n    const handleAvatarChange = async (e) => {\n        const file = e.target.files[0];\n        if (!file) return;\n\n        try {\n            Swal.fire({\n                title: 'Mengupload...',\n                text: 'Mohon tunggu sebentar',\n                allowOutsideClick: false,\n                didOpen: () => Swal.showLoading()\n            });\n\n            const publicUrl = await uploadAvatar(file, currentUser.id);\n            if (!publicUrl) throw new Error('Gagal mendapatkan URL gambar.');\n\n            // Update profile in DB\n            const { error } = await supabase.from('profiles').update({ avatar_url: publicUrl }).eq('id', currentUser.id);\n            if (error) throw error;\n\n            setCurrentUser(prev => ({ ...prev, avatar_url: publicUrl }));\n            Swal.fire('Sukses', 'Foto profil berhasil diperbarui!', 'success');\n        } catch (err) {\n            console.error(err);\n            Swal.fire('Error', 'Gagal upload foto: ' + err.message, 'error');\n        }\n    };\n\n    // --- RENDERERS ---\n\n    const renderDashboard = () => (\n        <div className=\"space-y-6 animate-in fade-in pb-20 md:pb-0\">\n            {/* Banner */}\n            <div className=\"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-6 md:p-8 text-white shadow-lg relative overflow-hidden\">\n                <div className=\"relative z-10\">\n                    <h2 className=\"text-2xl md:text-3xl font-bold mb-2\">Halo, {currentUser?.full_name?.split(' ')[0]}! ðŸš›</h2>\n                    <p className=\"opacity-90\">Siap menjemput rezeki dan menjaga lingkungan hari ini?</p>\n                    <div className=\"mt-6 flex flex-wrap items-center gap-3\">\n                        <div className=\"inline-flex items-center bg-white/20 backdrop-blur-sm px-4 py-2 rounded-lg border border-white/30\">\n                            <span className={`w-3 h-3 rounded-full mr-2 ${driverProfile?.status === 'On Duty' ? 'bg-green-400 animate-pulse' : 'bg-red-400'}`}></span>\n                            <span className=\"font-medium text-sm\">Status: {driverProfile ? (driverProfile.status || 'Off Duty') : (loading ? 'Loading...' : 'Tidak Terdaftar')}</span>\n                        </div>\n\n                        {/* Status Verifikasi Badge */}\n                        <div className={`inline-flex items-center px-4 py-2 rounded-lg border border-white/30 backdrop-blur-sm ${driverProfile?.verification_status === 'verified' ? 'bg-green-500/20 text-white' : 'bg-yellow-500/20 text-yellow-100'}`}>\n                            {driverProfile?.verification_status === 'verified' ? <CheckCircle2 size={16} className=\"mr-2\" /> : <AlertCircle size={16} className=\"mr-2\" />}\n                            <span className=\"font-bold text-sm uppercase\">{driverProfile?.verification_status || 'Pending'}</span>\n                        </div>\n                        <button\n                            onClick={handleDriverStatusToggle}\n                            disabled={!driverProfile && !loading}\n                            className={`text-xs px-3 py-2 rounded-lg font-bold transition shadow-md ${!driverProfile && !loading ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-white text-green-700 hover:bg-green-50'}`}\n                        >\n                            {loading ? '...' : (!driverProfile ? 'Hubungi Admin' : (driverProfile.status === 'On Duty' ? 'Matikan' : 'Aktifkan'))}\n                        </button>\n                    </div>\n                </div>\n                <Truck className=\"absolute right-[-10px] bottom-[-10px] opacity-10 w-32 h-32 md:w-40 md:h-40 transform -rotate-12\" />\n            </div>\n\n            {/* Statistik Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6\">\n                <div className=\"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center transition hover:shadow-md\">\n                    <div>\n                        <p className=\"text-gray-500 text-xs font-bold uppercase tracking-wide\">Order Masuk</p>\n                        <h3 className=\"text-3xl font-bold text-gray-800 mt-1\">{tasks.filter(t => t.status === 'Pending').length}</h3>\n                    </div>\n                    <div className=\"bg-yellow-50 p-3 rounded-xl text-yellow-600 border border-yellow-100\"><AlertCircle size={28} /></div>\n                </div>\n\n                <div className=\"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center transition hover:shadow-md border-l-4 border-l-green-500\">\n                    <div>\n                        <p className=\"text-gray-500 text-xs font-bold uppercase tracking-wide\">Total Pendapatan</p>\n                        <h3 className=\"text-2xl font-bold text-green-700 mt-1\">Rp {totalIncome.toLocaleString('id-ID')}</h3>\n                    </div>\n                    <div className=\"bg-green-50 p-3 rounded-xl text-green-600 border border-green-100\"><Wallet size={28} /></div>\n                </div>\n\n                <div className=\"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center transition hover:shadow-md\">\n                    <div>\n                        <p className=\"text-gray-500 text-xs font-bold uppercase tracking-wide\">Tugas Selesai</p>\n                        <h3 className=\"text-3xl font-bold text-blue-600 mt-1\">{history.length}</h3>\n                    </div>\n                    <div className=\"bg-blue-50 p-3 rounded-xl text-blue-600 border border-blue-100\"><CheckCircle2 size={28} /></div>\n                </div>\n            </div>\n\n            {/* Kartu Tugas Aktif */}\n            {tasks.filter(t => t.status === 'Process' && t.driver_id === currentUser?.id).map(task => (\n                <div key={task.id} className=\"bg-white border border-blue-200 rounded-2xl p-6 shadow-lg shadow-blue-50 animate-in slide-in-from-bottom duration-500 relative overflow-hidden\">\n                    <div className=\"absolute top-0 left-0 w-2 h-full bg-blue-500\"></div>\n                    <div className=\"flex justify-between items-start mb-6 border-b border-gray-100 pb-4\">\n                        <div>\n                            <h3 className=\"font-bold text-xl text-gray-800 flex items-center gap-2\"><Truck className=\"text-blue-600\" /> Sedang Dijemput</h3>\n                            <p className=\"text-sm text-gray-500 mt-1\">Order ID: #{String(task.id).slice(0, 8)}</p>\n                        </div>\n                        <span className=\"bg-blue-100 text-blue-700 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide shadow-sm\">PROCESS</span>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n                        <div className=\"space-y-4\">\n                            <div className=\"flex items-start gap-4\">\n                                <div className=\"bg-blue-50 p-2 rounded-lg text-blue-600\"><User size={20} /></div>\n                                <div>\n                                    <p className=\"text-xs text-gray-500 font-bold uppercase\">Nama Warga</p>\n                                    <p className=\"text-gray-800 font-bold text-lg\">{task.profiles?.full_name}</p>\n                                </div>\n                            </div>\n                            <div className=\"flex items-start gap-4\">\n                                <div className=\"bg-red-50 p-2 rounded-lg text-red-600\"><MapPin size={20} /></div>\n                                <div>\n                                    <p className=\"text-xs text-gray-500 font-bold uppercase\">Alamat</p>\n                                    <p className=\"text-gray-800 font-medium leading-relaxed\">{task.profiles?.address}</p>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"space-y-4\">\n                            <div className=\"flex items-start gap-4\">\n                                <div className=\"bg-orange-50 p-2 rounded-lg text-orange-600\"><Package size={20} /></div>\n                                <div>\n                                    <p className=\"text-xs text-gray-500 font-bold uppercase\">Detail Sampah</p>\n                                    <p className=\"text-gray-800 font-medium\">{task.waste_types?.name} â€¢ <span className=\"font-bold\">{task.weight} Kg</span></p>\n                                    <p className=\"text-sm text-green-600 font-bold mt-1\">Rp {task.total_price?.toLocaleString()}</p>\n                                </div>\n                            </div>\n                            <div className=\"bg-yellow-50 p-3 rounded-xl border border-yellow-100 text-sm text-yellow-800 flex gap-2\">\n                                <AlertCircle size={16} className=\"mt-0.5 flex-shrink-0\" />\n                                <p><strong>Catatan:</strong> \"{task.notes || 'Tidak ada catatan'}\"</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4\">\n                        <button onClick={() => contactUser('whatsapp', task.profiles?.phone, task.profiles?.full_name)} className=\"flex items-center justify-center gap-2 py-3 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 transition shadow-sm\"><MessageCircle size={20} /> Chat WA</button>\n                        <button onClick={() => contactUser('call', task.profiles?.phone)} className=\"flex items-center justify-center gap-2 py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-sm\"><Phone size={20} /> Telepon</button>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-3 pt-2 border-t border-gray-100\">\n                        <a href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(task.profiles?.address)}`} target=\"_blank\" className=\"flex justify-center items-center gap-2 py-3 bg-white text-gray-700 font-bold rounded-xl border-2 border-gray-100 hover:bg-gray-50 hover:border-gray-300 transition\"><Navigation size={20} /> Buka Maps</a>\n                        <button onClick={() => handleTaskAction(task.id, 'Done')} className=\"flex justify-center items-center gap-2 bg-blue-800 text-white py-3 rounded-xl font-bold hover:bg-blue-900 transition shadow-lg shadow-blue-200\"><CheckCircle size={20} /> Selesai Tugas</button>\n                    </div>\n                </div>\n            ))}\n        </div>\n    );\n\n    const renderTasks = () => {\n        // Filter tasks based on selected tab\n        const pendingTasks = tasks.filter(t => t.status === 'Pending' && (t.profiles?.full_name || '').toLowerCase().includes(searchQuery.toLowerCase()));\n        const processTasks = tasks.filter(t => t.status === 'Process' && t.driver_id === currentUser?.id);\n\n        return (\n            <div className=\"space-y-6 animate-in slide-in-from-right pb-20 md:pb-0\">\n                {/* Header with Search */}\n                <div className=\"bg-white p-4 rounded-2xl shadow-sm border border-gray-200 flex flex-col md:flex-row gap-4 items-center justify-between\">\n                    <h3 className=\"font-bold text-lg text-gray-800 ml-2\">Daftar Tugas</h3>\n                    <div className=\"relative w-full md:w-80\">\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={18} />\n                        <input\n                            type=\"text\"\n                            placeholder=\"Cari lokasi atau nama warga...\"\n                            className=\"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-xl outline-none focus:ring-2 ring-green-500 transition\"\n                            value={searchQuery}\n                            onChange={(e) => setSearchQuery(e.target.value)}\n                        />\n                    </div>\n                </div>\n\n                {/* Tab Filters */}\n                <div className=\"flex gap-2 overflow-x-auto pb-2\">\n                    <button\n                        onClick={() => setTaskFilter('pending')}\n                        className={`flex items-center gap-2 px-5 py-2.5 rounded-xl font-bold text-sm transition whitespace-nowrap ${taskFilter === 'pending'\n                            ? 'bg-yellow-500 text-white shadow-lg shadow-yellow-200'\n                            : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'\n                            }`}\n                    >\n                        <Clock size={16} />\n                        Pending\n                        <span className={`ml-1 px-2 py-0.5 rounded-full text-xs ${taskFilter === 'pending' ? 'bg-yellow-600' : 'bg-gray-200 text-gray-600'\n                            }`}>\n                            {pendingTasks.length}\n                        </span>\n                    </button>\n                    <button\n                        onClick={() => setTaskFilter('process')}\n                        className={`flex items-center gap-2 px-5 py-2.5 rounded-xl font-bold text-sm transition whitespace-nowrap ${taskFilter === 'process'\n                            ? 'bg-blue-500 text-white shadow-lg shadow-blue-200'\n                            : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'\n                            }`}\n                    >\n                        <Truck size={16} />\n                        Proses\n                        <span className={`ml-1 px-2 py-0.5 rounded-full text-xs ${taskFilter === 'process' ? 'bg-blue-600' : 'bg-gray-200 text-gray-600'\n                            }`}>\n                            {processTasks.length}\n                        </span>\n                    </button>\n                </div>\n\n                {/* Pending Tasks */}\n                {taskFilter === 'pending' && (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {pendingTasks.map(task => (\n                            <div key={task.id} className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-200 hover:shadow-lg transition duration-300 group\">\n                                <div className=\"flex justify-between items-start mb-4\">\n                                    <div>\n                                        <h4 className=\"font-bold text-gray-800 text-lg group-hover:text-green-600 transition\">{task.profiles?.full_name}</h4>\n                                        <p className=\"text-xs text-gray-400 mt-1 flex items-center gap-1 bg-gray-50 px-2 py-1 rounded w-fit\"><Clock size={12} /> {new Date(task.created_at).toLocaleString()}</p>\n                                    </div>\n                                    <span className=\"bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-xs font-bold border border-yellow-200 shadow-sm\">PENDING</span>\n                                </div>\n\n                                <div className=\"text-sm text-gray-600 space-y-3 mb-6 bg-gray-50 p-4 rounded-xl border border-gray-100\">\n                                    <div className=\"flex gap-3 items-start\">\n                                        <MapPin size={18} className=\"text-red-500 flex-shrink-0 mt-0.5\" />\n                                        <span className=\"line-clamp-2 font-medium\">{task.profiles?.address}</span>\n                                    </div>\n                                    <div className=\"flex gap-3 items-center\">\n                                        <Package size={18} className=\"text-blue-500 flex-shrink-0\" />\n                                        <span>{task.waste_types?.name} â€¢ <span className=\"font-bold text-gray-800\">{task.weight} Kg</span></span>\n                                    </div>\n                                    <div className=\"flex gap-3 items-center\">\n                                        <Clock size={18} className=\"text-orange-500 flex-shrink-0\" />\n                                        <span>Jadwal: {task.pickup_time}</span>\n                                    </div>\n                                </div>\n\n                                <button\n                                    onClick={() => handleTaskAction(task.id, 'Process')}\n                                    className=\"w-full bg-green-600 text-white py-3.5 rounded-xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 shadow-md shadow-green-100\"\n                                >\n                                    <Truck size={20} /> Ambil Tugas Ini\n                                </button>\n                            </div>\n                        ))}\n\n                        {pendingTasks.length === 0 && (\n                            <div className=\"col-span-full py-16 text-center text-gray-400 bg-white border-2 border-dashed border-gray-200 rounded-2xl\">\n                                <div className=\"bg-gray-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4\">\n                                    <Clock size={40} className=\"text-gray-300\" />\n                                </div>\n                                <p className=\"text-lg font-medium text-gray-600\">Tidak ada order pending saat ini.</p>\n                                <p className=\"text-sm text-gray-400\">Silakan tunggu notifikasi order baru.</p>\n                            </div>\n                        )}\n                    </div>\n                )}\n\n                {/* Process Tasks */}\n                {taskFilter === 'process' && (\n                    <div className=\"space-y-4\">\n                        {processTasks.map(task => (\n                            <div key={task.id} className=\"bg-white border border-blue-200 rounded-2xl p-6 shadow-lg shadow-blue-50 animate-in slide-in-from-bottom duration-500 relative overflow-hidden\">\n                                <div className=\"absolute top-0 left-0 w-2 h-full bg-blue-500\"></div>\n                                <div className=\"flex justify-between items-start mb-6 border-b border-gray-100 pb-4\">\n                                    <div>\n                                        <h3 className=\"font-bold text-xl text-gray-800 flex items-center gap-2\"><Truck className=\"text-blue-600\" /> Sedang Dijemput</h3>\n                                        <p className=\"text-sm text-gray-500 mt-1\">Order ID: #{String(task.id).slice(0, 8)}</p>\n                                    </div>\n                                    <span className=\"bg-blue-100 text-blue-700 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide shadow-sm\">PROCESS</span>\n                                </div>\n\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n                                    <div className=\"space-y-4\">\n                                        <div className=\"flex items-start gap-4\">\n                                            <div className=\"bg-blue-50 p-2 rounded-lg text-blue-600\"><User size={20} /></div>\n                                            <div>\n                                                <p className=\"text-xs text-gray-500 font-bold uppercase\">Nama Warga</p>\n                                                <p className=\"text-gray-800 font-bold text-lg\">{task.profiles?.full_name}</p>\n                                            </div>\n                                        </div>\n                                        <div className=\"flex items-start gap-4\">\n                                            <div className=\"bg-red-50 p-2 rounded-lg text-red-600\"><MapPin size={20} /></div>\n                                            <div>\n                                                <p className=\"text-xs text-gray-500 font-bold uppercase\">Alamat</p>\n                                                <p className=\"text-gray-800 font-medium leading-relaxed\">{task.profiles?.address}</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"space-y-4\">\n                                        <div className=\"flex items-start gap-4\">\n                                            <div className=\"bg-orange-50 p-2 rounded-lg text-orange-600\"><Package size={20} /></div>\n                                            <div>\n                                                <p className=\"text-xs text-gray-500 font-bold uppercase\">Detail Sampah</p>\n                                                <p className=\"text-gray-800 font-medium\">{task.waste_types?.name} â€¢ <span className=\"font-bold\">{task.weight} Kg</span></p>\n                                                <p className=\"text-sm text-green-600 font-bold mt-1\">Rp {task.total_price?.toLocaleString()}</p>\n                                            </div>\n                                        </div>\n                                        <div className=\"bg-yellow-50 p-3 rounded-xl border border-yellow-100 text-sm text-yellow-800 flex gap-2\">\n                                            <AlertCircle size={16} className=\"mt-0.5 flex-shrink-0\" />\n                                            <p><strong>Catatan:</strong> \"{task.notes || 'Tidak ada catatan'}\"</p>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4\">\n                                    <button onClick={() => { setSelectedChatTask(task); setIsChatOpen(true); }} className=\"flex items-center justify-center gap-2 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-sm\"><MessageCircle size={20} /> Chat App</button>\n                                    <button onClick={() => contactUser('whatsapp', task.profiles?.phone, task.profiles?.full_name)} className=\"flex items-center justify-center gap-2 py-3 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 transition shadow-sm\"><MessageCircle size={20} /> WhatsApp</button>\n                                    <button onClick={() => contactUser('call', task.profiles?.phone)} className=\"flex items-center justify-center gap-2 py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-sm\"><Phone size={20} /> Telepon</button>\n                                </div>\n\n                                <div className=\"grid grid-cols-2 gap-3 pt-2 border-t border-gray-100\">\n                                    <a href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(task.profiles?.address)}`} target=\"_blank\" className=\"flex justify-center items-center gap-2 py-3 bg-white text-gray-700 font-bold rounded-xl border-2 border-gray-100 hover:bg-gray-50 hover:border-gray-300 transition\"><Navigation size={20} /> Buka Maps</a>\n                                    <button onClick={() => handleTaskAction(task.id, 'Done')} className=\"flex justify-center items-center gap-2 bg-blue-800 text-white py-3 rounded-xl font-bold hover:bg-blue-900 transition shadow-lg shadow-blue-200\"><CheckCircle size={20} /> Selesai Tugas</button>\n                                </div>\n                            </div>\n                        ))}\n\n                        {processTasks.length === 0 && (\n                            <div className=\"py-16 text-center text-gray-400 bg-white border-2 border-dashed border-gray-200 rounded-2xl\">\n                                <div className=\"bg-gray-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4\">\n                                    <Truck size={40} className=\"text-gray-300\" />\n                                </div>\n                                <p className=\"text-lg font-medium text-gray-600\">Tidak ada tugas aktif saat ini.</p>\n                                <p className=\"text-sm text-gray-400\">Ambil tugas dari tab Pending untuk mulai bekerja.</p>\n                            </div>\n                        )}\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    const renderMap = () => (\n        <div className=\"h-[calc(100vh-140px)] bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden relative animate-in fade-in z-0\">\n            {/* OpenLayers Map Container */}\n            <div ref={mapElement} style={{ width: '100%', height: '100%' }} />\n\n            <button onClick={centerToMyLocation} className=\"absolute bottom-6 right-6 z-[400] bg-white p-3 rounded-full shadow-lg text-blue-600 hover:bg-blue-50 border border-gray-200 transition transform hover:scale-110\" title=\"Lokasi Saya\">\n                <Navigation size={24} />\n            </button>\n            <div className=\"absolute top-4 right-4 z-[400] bg-white/90 backdrop-blur px-4 py-2 rounded-lg shadow-md text-xs font-bold text-gray-700 border border-gray-200 flex items-center gap-2\">\n                <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                {tasks.filter(t => t.status === 'Pending').length} Lokasi Penjemputan\n            </div>\n        </div>\n    );\n\n    const renderHistory = () => (\n        <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 animate-in slide-in-from-right overflow-hidden\">\n            <div className=\"p-6 border-b border-gray-100 bg-gray-50/50\">\n                <h3 className=\"font-bold text-lg text-gray-800 flex items-center gap-2\"><History className=\"text-gray-500\" /> Riwayat Selesai</h3>\n            </div>\n            <div className=\"divide-y divide-gray-100\">\n                {history.map(h => (\n                    <div key={h.id} className=\"p-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 hover:bg-gray-50 transition duration-200\">\n                        <div className=\"flex-1\">\n                            <div className=\"flex items-center justify-between mb-2 md:mb-0 md:justify-start md:gap-4\">\n                                <p className=\"font-bold text-gray-800 text-lg\">{h.profiles?.full_name}</p>\n                                <span className=\"md:hidden bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs font-bold\">Done</span>\n                            </div>\n                            <div className=\"flex items-center gap-3 text-sm text-gray-500 mt-1\">\n                                <span className=\"flex items-center gap-1 bg-white border px-2 py-0.5 rounded\"><Calendar size={12} /> {new Date(h.updated_at).toLocaleDateString()}</span>\n                                <span className=\"flex items-center gap-1 bg-white border px-2 py-0.5 rounded\"><Clock size={12} /> {new Date(h.updated_at).toLocaleTimeString()}</span>\n                            </div>\n                            <p className=\"text-xs text-gray-400 mt-2 flex items-center gap-1\"><MapPin size={12} /> {h.profiles?.address}</p>\n                        </div>\n                        <div className=\"text-right flex flex-col items-end min-w-[120px]\">\n                            <span className=\"hidden md:flex bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border border-green-200 items-center gap-1 mb-2\">\n                                <CheckCircle2 size={12} /> Selesai\n                            </span>\n                            <p className=\"text-xl font-bold text-green-700\">Rp {h.total_price?.toLocaleString()}</p>\n                            <p className=\"text-xs text-gray-400\">{h.waste_types?.name} ({h.weight} Kg)</p>\n                        </div>\n                    </div>\n                ))}\n                {history.length === 0 && (\n                    <div className=\"p-16 text-center text-gray-400 flex flex-col items-center justify-center\">\n                        <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4\">\n                            <History size={32} className=\"text-gray-300\" />\n                        </div>\n                        <p className=\"font-medium text-gray-600\">Belum ada riwayat tugas selesai.</p>\n                        <p className=\"text-sm\">Riwayat akan muncul setelah Anda menyelesaikan tugas.</p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n\n    // --- EARNINGS PAGE RENDERER ---\n    const renderEarnings = () => {\n        const earnings = calculateDriverEarnings(history.map(h => ({\n            ...h,\n            created_at: h.updated_at || new Date().toISOString(),\n            total_price: h.total_price || 0,\n            status: 'done'\n        })));\n\n        const handleExport = async () => {\n            if (!history.length) {\n                Swal.fire('Info', 'Tidak ada data untuk diexport', 'info');\n                return;\n            }\n\n            const exportData = history.map(t => ({\n                'Tanggal': new Date(t.updated_at).toLocaleDateString('id-ID'),\n                'Pelanggan': t.profiles?.full_name || '-',\n                'Jenis Sampah': t.waste_types?.name || '-',\n                'Berat (kg)': t.weight,\n                'Total Transaksi': formatRupiah(t.total_price || 0),\n                'Komisi Driver (15%)': formatRupiah((t.total_price || 0) * 0.15),\n                'Status': t.status\n            }));\n\n            const success = await exportToExcel(exportData, 'driver_earnings');\n            if (success) {\n                Swal.fire('Berhasil!', 'Laporan berhasil diexport ke CSV', 'success');\n            }\n        };\n\n        return (\n            <div className=\"space-y-6 animate-in slide-in-from-right pb-20 md:pb-0\">\n                {/* Header */}\n                <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n                    <div>\n                        <h2 className=\"text-2xl md:text-3xl font-bold text-gray-800\">Pendapatan Driver</h2>\n                        <p className=\"text-gray-500 mt-1\">Tracking komisi dan performa Anda</p>\n                    </div>\n                    <button\n                        onClick={handleExport}\n                        className=\"bg-green-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-green-700 flex items-center gap-2 transition\"\n                    >\n                        <Download size={18} /> Export Laporan\n                    </button>\n                </div>\n\n                {/* Earning Cards */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6\">\n                    {/* Today */}\n                    <div className=\"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-xl text-white shadow-lg transform hover:scale-105 transition\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                            <p className=\"opacity-90 font-medium\">Hari Ini</p>\n                            <Calendar size={20} className=\"opacity-80\" />\n                        </div>\n                        <h3 className=\"text-2xl md:text-3xl font-bold mb-1\">{formatRupiah(earnings.today)}</h3>\n                        <p className=\"text-sm opacity-80\">Komisi hari ini</p>\n                    </div>\n\n                    {/* This Week */}\n                    <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                            <p className=\"text-gray-500 font-medium\">Minggu Ini</p>\n                            <TrendingUp size={20} className=\"text-blue-500\" />\n                        </div>\n                        <h3 className=\"text-2xl md:text-3xl font-bold text-gray-800 mb-1\">{formatRupiah(earnings.thisWeek)}</h3>\n                        <p className=\"text-sm text-gray-500\">7 hari terakhir</p>\n                    </div>\n\n                    {/* This Month */}\n                    <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                            <p className=\"text-gray-500 font-medium\">Bulan Ini</p>\n                            <Wallet size={20} className=\"text-purple-500\" />\n                        </div>\n                        <h3 className=\"text-2xl md:text-3xl font-bold text-gray-800 mb-1\">{formatRupiah(earnings.thisMonth)}</h3>\n                        <p className=\"text-sm text-gray-500\">Periode bulan ini</p>\n                    </div>\n\n                    {/* Total All Time */}\n                    <div className=\"bg-gradient-to-br from-amber-400 to-orange-500 p-6 rounded-xl text-white shadow-lg transform hover:scale-105 transition\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                            <p className=\"opacity-90 font-medium\">Total Keseluruhan</p>\n                            <Trophy size={20} className=\"opacity-80\" />\n                        </div>\n                        <h3 className=\"text-2xl md:text-3xl font-bold mb-1\">{formatRupiah(earnings.total)}</h3>\n                        <p className=\"text-sm opacity-80\">{earnings.transactionCount} transaksi</p>\n                    </div>\n                </div>\n\n                {/* Performance Stats */}\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6\">\n                    <div className=\"bg-white p-5 rounded-xl border border-gray-200\">\n                        <div className=\"flex items-center gap-3\">\n                            <div className=\"bg-blue-100 p-3 rounded-lg\">\n                                <Package size={24} className=\"text-blue-600\" />\n                            </div>\n                            <div>\n                                <p className=\"text-sm text-gray-500\">Total Pickup</p>\n                                <p className=\"text-2xl font-bold text-gray-800\">{earnings.transactionCount}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"bg-white p-5 rounded-xl border border-gray-200\">\n                        <div className=\"flex items-center gap-3\">\n                            <div className=\"bg-green-100 p-3 rounded-lg\">\n                                <DollarSign size={24} className=\"text-green-600\" />\n                            </div>\n                            <div>\n                                <p className=\"text-sm text-gray-500\">Rata-rata Komisi</p>\n                                <p className=\"text-2xl font-bold text-gray-800\">\n                                    {earnings.transactionCount > 0 ? formatRupiah(earnings.total / earnings.transactionCount) : formatRupiah(0)}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"bg-white p-5 rounded-xl border border-gray-200\">\n                        <div className=\"flex items-center gap-3\">\n                            <div className=\"bg-purple-100 p-3 rounded-lg\">\n                                <Clock size={24} className=\"text-purple-600\" />\n                            </div>\n                            <div>\n                                <p className=\"text-sm text-gray-500\">Pickup Hari Ini</p>\n                                <p className=\"text-2xl font-bold text-gray-800\">\n                                    {history.filter(t => {\n                                        const today = new Date().toDateString();\n                                        return new Date(t.updated_at).toDateString() === today;\n                                    }).length}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Transaction History */}\n                <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                    <div className=\"p-4 md:p-6 border-b border-gray-100 bg-gray-50/50\">\n                        <h3 className=\"text-xl font-bold text-gray-800 flex items-center gap-2\">\n                            <TrendingUp size={22} /> Riwayat Transaksi & Komisi\n                        </h3>\n                    </div>\n\n                    {history.length === 0 ? (\n                        <div className=\"text-center py-12 text-gray-400\">\n                            <Package size={48} className=\"mx-auto mb-3 opacity-30\" />\n                            <p>Belum ada transaksi selesai</p>\n                        </div>\n                    ) : (\n                        <div className=\"overflow-x-auto\">\n                            <table className=\"w-full\">\n                                <thead className=\"bg-gray-50 border-b border-gray-200\">\n                                    <tr>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase\">Tanggal</th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase\">Pelanggan</th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase\">Jenis</th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase\">Berat</th>\n                                        <th className=\"px-4 py-3 text-right text-xs font-bold text-gray-600 uppercase\">Total</th>\n                                        <th className=\"px-4 py-3 text-right text-xs font-bold text-gray-600 uppercase\">Komisi (15%)</th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"divide-y divide-gray-200\">\n                                    {history.slice(0, 20).map((t) => (\n                                        <tr key={t.id} className=\"hover:bg-gray-50 transition\">\n                                            <td className=\"px-4 py-3 text-sm text-gray-700\">\n                                                {new Date(t.updated_at).toLocaleDateString('id-ID')}\n                                            </td>\n                                            <td className=\"px-4 py-3 text-sm font-medium text-gray-800\">\n                                                {t.profiles?.full_name || 'N/A'}\n                                            </td>\n                                            <td className=\"px-4 py-3 text-sm text-gray-700\">\n                                                {t.waste_types?.name || 'N/A'}\n                                            </td>\n                                            <td className=\"px-4 py-3 text-sm text-gray-700\">\n                                                {t.weight} kg\n                                            </td>\n                                            <td className=\"px-4 py-3 text-sm text-right font-medium text-gray-800\">\n                                                {formatRupiah(t.total_price || 0)}\n                                            </td>\n                                            <td className=\"px-4 py-3 text-sm text-right font-bold text-green-600\">\n                                                {formatRupiah((t.total_price || 0) * 0.15)}\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    )}\n                </div>\n\n                {/* Info Note */}\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                    <p className=\"text-sm text-blue-800\">\n                        <span className=\"font-bold\">â„¹ï¸ Catatan:</span> Komisi driver adalah 15% dari setiap transaksi yang selesai.\n                        Pembayaran komisi dilakukan setiap akhir bulan.\n                    </p>\n                </div>\n            </div>\n        );\n    };\n\n    // --- PROFILE PAGE RENDERER ---\n    const renderProfile = () => (\n        <div className=\"space-y-6 animate-in slide-in-from-right pb-20 md:pb-0\">\n            <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden\">\n                <div className=\"bg-gradient-to-r from-green-600 to-emerald-600 p-8 text-white text-center\">\n                    <div className=\"relative group w-24 h-24 mx-auto mb-4 cursor-pointer\" onClick={() => document.getElementById('driver-avatar-upload').click()}>\n                        <div className=\"w-full h-full bg-white/20 rounded-full flex items-center justify-center text-4xl font-bold backdrop-blur overflow-hidden border-2 border-white/30\">\n                            {currentUser?.avatar_url ? (\n                                <img src={currentUser.avatar_url} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n                            ) : (\n                                currentUser?.full_name?.charAt(0) || 'D'\n                            )}\n                        </div>\n                        <div className=\"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition\">\n                            <Edit2 className=\"text-white\" size={24} />\n                        </div>\n                    </div>\n                    <input type=\"file\" id=\"driver-avatar-upload\" className=\"hidden\" accept=\"image/*\" onChange={handleAvatarChange} />\n\n                    <h2 className=\"text-2xl font-bold\">{currentUser?.full_name || 'Driver'}</h2>\n                    <p className=\"opacity-80 mt-1\">{currentUser?.email}</p>\n                    <span className=\"inline-block mt-3 bg-white/20 px-4 py-1 rounded-full text-sm font-bold backdrop-blur\">\n                        ðŸš› Driver Aktif\n                    </span>\n                </div>\n\n                <div className=\"p-6 space-y-6\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <div className=\"bg-gray-50 p-4 rounded-xl border border-gray-100\">\n                            <p className=\"text-xs text-gray-500 font-bold uppercase mb-1\">Nama Lengkap</p>\n                            <p className=\"text-gray-800 font-medium\">{currentUser?.full_name || '-'}</p>\n                        </div>\n                        <div className=\"bg-gray-50 p-4 rounded-xl border border-gray-100\">\n                            <p className=\"text-xs text-gray-500 font-bold uppercase mb-1\">Email</p>\n                            <p className=\"text-gray-800 font-medium\">{currentUser?.email || '-'}</p>\n                        </div>\n                        <div className=\"bg-gray-50 p-4 rounded-xl border border-gray-100\">\n                            <p className=\"text-xs text-gray-500 font-bold uppercase mb-1\">No. Telepon</p>\n                            <p className=\"text-gray-800 font-medium\">{driverProfile?.phone || currentUser?.phone || '-'}</p>\n                        </div>\n                        <div className=\"bg-gray-50 p-4 rounded-xl border border-gray-100\">\n                            <p className=\"text-xs text-gray-500 font-bold uppercase mb-1\">Kendaraan</p>\n                            <p className=\"text-gray-800 font-medium\">{driverProfile?.vehicle || 'Pickup Truck'}</p>\n                        </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-100\">\n                        <div className=\"text-center p-4 bg-green-50 rounded-xl\">\n                            <p className=\"text-2xl font-bold text-green-700\">{history.length}</p>\n                            <p className=\"text-xs text-green-600 font-medium\">Total Selesai</p>\n                        </div>\n                        <div className=\"text-center p-4 bg-blue-50 rounded-xl\">\n                            <p className=\"text-2xl font-bold text-blue-700\">{tasks.filter(t => t.status === 'Process' && t.driver_id === currentUser?.id).length}</p>\n                            <p className=\"text-xs text-blue-600 font-medium\">Tugas Aktif</p>\n                        </div>\n                        <div className=\"text-center p-4 bg-purple-50 rounded-xl\">\n                            <p className=\"text-2xl font-bold text-purple-700\">{formatRupiah(totalIncome)}</p>\n                            <p className=\"text-xs text-purple-600 font-medium\">Total Komisi</p>\n                        </div>\n                        <div className=\"text-center p-4 bg-orange-50 rounded-xl\">\n                            <p className=\"text-2xl font-bold text-orange-700\">â­ 4.8</p>\n                            <p className=\"text-xs text-orange-600 font-medium\">Rating</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n\n    const renderContent = () => {\n        switch (activePage) {\n            case 'dashboard': return renderDashboard();\n            case 'tasks': return renderTasks();\n            case 'map': return renderMap();\n            case 'history': return renderHistory();\n            case 'earnings': return renderEarnings();\n            case 'profile': return renderProfile();\n            default: return <div>Halaman tidak ditemukan</div>;\n        }\n    };\n\n    if (loading) return <div className=\"min-h-screen flex justify-center items-center text-gray-800 font-bold\"><Loader2 className=\"animate-spin mr-2\" /> Memuat...</div>;\n\n    return (\n        <div className=\"min-h-screen bg-slate-50 flex font-sans text-gray-800 overflow-x-hidden\">\n            {isMobileMenuOpen && <div className=\"fixed inset-0 bg-black/50 z-40 md:hidden\" onClick={() => setIsMobileMenuOpen(false)} />}\n            <aside className={`fixed top-0 left-0 z-50 h-full bg-white border-r border-gray-200 transition-transform duration-300 md:translate-x-0 ${isMobileMenuOpen ? 'translate-x-0 w-64' : '-translate-x-full w-64'} ${isSidebarOpen ? 'md:w-64' : 'md:w-20'} flex flex-col shadow-[4px_0_24px_rgba(0,0,0,0.02)]`}>\n                <div className=\"h-20 flex items-center justify-between px-5 border-b border-gray-100\">\n\n                    {/* LOGO & BADGE DRIVER (Tampil saat Sidebar TERBUKA) */}\n                    {/* LOGO & BADGE DRIVER */}\n                    <div className={`flex items-center gap-3 transition-all duration-300 ${!isSidebarOpen ? 'justify-center w-full px-0' : 'px-0'}`}>\n                        {isSidebarOpen ? (\n                            <div className=\"flex flex-col animate-in fade-in slide-in-from-left duration-300\">\n                                <img src=\"/images/logo.png\" alt=\"Logo\" className=\"w-36 h-auto object-contain mb-1\" />\n                            </div>\n                        ) : (\n                            <button onClick={() => setIsSidebarOpen(true)} className=\"mx-auto relative group\">\n                                <img src=\"/images/mini-logo.png\" alt=\"RecycleYuk\" className=\"w-10 h-10 object-contain transition-transform group-hover:scale-110\" />\n                                <div className=\"absolute -right-2 -bottom-2 bg-green-100 text-green-600 rounded-full p-0.5 shadow-sm border border-white\">\n                                    <ChevronRight size={12} />\n                                </div>\n                            </button>\n                        )}\n                    </div>\n\n                    {/* TOMBOL TOGGLE */}\n                    {isSidebarOpen && (\n                        <button onClick={() => setIsSidebarOpen(false)} className=\"hidden md:block p-2 hover:bg-gray-100 rounded-xl text-gray-500 transition\">\n                            <ChevronLeft />\n                        </button>\n                    )}\n                    <button onClick={() => setIsMobileMenuOpen(false)} className=\"md:hidden p-2 text-gray-500\"><X /></button>\n                </div>\n\n                {/* MENU NAVIGASI */}\n                <nav className=\"flex-1 p-4 space-y-2 overflow-y-auto\">\n                    {SIDEBAR_MENUS.map(m => (\n                        <button key={m.id} onClick={() => navigateTo(m.id)} className={`w-full flex items-center gap-3 p-3.5 rounded-xl transition-all duration-200 font-medium ${activePage === m.id ? 'bg-green-50 text-green-700 shadow-sm ring-1 ring-green-100' : 'text-gray-500 hover:bg-gray-50 hover:text-green-600'} ${!isSidebarOpen && 'justify-center px-0'}`}>\n                            <m.icon size={22} strokeWidth={activePage === m.id ? 2.5 : 2} />\n                            <span className={`${!isSidebarOpen ? 'md:hidden' : 'block'}`}>{m.label}</span>\n                        </button>\n                    ))}\n                </nav>\n                <div className=\"p-4 border-t border-gray-100\">\n                    <button onClick={handleLogout} className={`w-full flex items-center rounded-xl font-medium text-red-600 hover:bg-red-50 transition-all h-12 ${isSidebarOpen ? 'px-4 gap-3 justify-start' : 'justify-center px-0'}`}>\n                        <LogOut size={22} className=\"min-w-[22px]\" /> {isSidebarOpen && \"Keluar\"}\n                    </button>\n                </div>\n            </aside>\n            <main className={`flex-1 p-4 md:p-8 transition-all duration-300 ${isSidebarOpen ? 'md:ml-64' : 'md:ml-20'}`}>\n                <div className=\"md:hidden flex justify-between items-center mb-6 sticky top-0 bg-slate-50/90 backdrop-blur-md z-30 py-3 px-1 border-b border-slate-200\">\n                    <button onClick={() => setIsMobileMenuOpen(true)} className=\"p-2 -ml-2\"><Menu /></button>\n                    <span className=\"font-bold text-lg capitalize text-gray-800\">{activePage}</span>\n                    <button onClick={() => navigateTo('profile')} className=\"w-9 h-9 bg-green-100 rounded-full flex items-center justify-center font-bold text-green-700 border border-green-200\">{currentUser?.full_name?.charAt(0)}</button>\n                </div>\n                <div className=\"max-w-6xl mx-auto\">\n                    <header className=\"hidden md:flex justify-between items-center mb-8\">\n                        <div>\n                            <h2 className=\"text-3xl font-bold capitalize text-gray-800 tracking-tight\">\n                                {activePage === 'dashboard' ? 'Ringkasan' :\n                                    activePage === 'history' ? 'Riwayat' :\n                                        activePage === 'tasks' ? 'Tugas Jemput' :\n                                            activePage === 'map' ? 'Peta Lokasi' :\n                                                'Profil'}\n                            </h2>\n                            <p className=\"text-gray-500 mt-1\">Dashboard Operasional Driver</p>\n                        </div>\n                        <div className=\"flex items-center gap-3 bg-white p-1 rounded-xl border border-gray-200 shadow-sm\">\n                            <button className=\"p-2 rounded-lg hover:bg-gray-100 relative text-gray-600 group transition\">\n                                <Bell size={20} className=\"group-hover:text-green-600\" />\n                            </button>\n                            <div className=\"w-px h-6 bg-gray-200\"></div>\n                            <button onClick={() => navigateTo('profile')} className=\"flex items-center gap-3 pl-2 pr-3 py-1 rounded-lg hover:bg-gray-50 transition\">\n                                <div className=\"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-700 font-bold border border-green-200 overflow-hidden\">\n                                    {currentUser?.avatar_url ? (\n                                        <img src={currentUser.avatar_url} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n                                    ) : (\n                                        currentUser?.full_name?.charAt(0) || 'D'\n                                    )}\n                                </div>\n                                <div className=\"text-left hidden md:block\">\n                                    <p className=\"text-xs font-bold text-gray-800 line-clamp-1 max-w-[100px]\">{currentUser?.full_name}</p>\n                                    <p className=\"text-0 text-gray-500\">Driver</p>\n                                </div>\n                            </button>\n                        </div>\n                    </header>\n                    {renderContent()}\n\n                    {/* CHAT MODAL - Driver to User */}\n                    {selectedChatTask && (\n                        <ChatModal\n                            isOpen={isChatOpen}\n                            onClose={() => setIsChatOpen(false)}\n                            transactionId={selectedChatTask.id}\n                            currentUserId={currentUser?.id}\n                            currentUserName={currentUser?.full_name}\n                            otherUserName={selectedChatTask.profiles?.full_name || 'User'}\n                            isDriver={true}\n                        />\n                    )}\n                </div>\n            </main>\n        </div>\n    );\n}"],"names":[],"mappings":"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"}}]
}