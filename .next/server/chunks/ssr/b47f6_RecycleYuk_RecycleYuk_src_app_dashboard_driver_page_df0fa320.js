module.exports=[66735,a=>{"use strict";var b=a.i(13755),c=a.i(36985),d=a.i(42755),e=a.i(88691),f=a.i(54946),g=a.i(61964),h=a.i(53115),i=a.i(11626),j=a.i(27075);let k=(0,j.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var l=a.i(52446),m=a.i(3895),n=a.i(28392),o=a.i(22423),p=a.i(79408),q=a.i(32207),r=a.i(5978),s=a.i(11323),t=a.i(77307),u=a.i(16967),v=a.i(92161),w=a.i(80587);let x=(0,j.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var y=a.i(51386),z=a.i(88174),A=a.i(25243),B=a.i(75071);let C=(0,j.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),D=(0,j.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var E=a.i(5564);let F=(0,j.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var G=a.i(50561),H=a.i(94488),I=a.i(31285),J=a.i(58290),K=a.i(55167),L=a.i(35039),M=a.i(40874),N=a.i(99869),O=a.i(19510),P=a.i(35270),Q=a.i(86760),R=a.i(2953),S=a.i(51626),T=a.i(71313),U=a.i(52883),V=a.i(28681),W=a.i(10867),X=a.i(83394),Y=a.i(38176),Z=a.i(84802);let $=(0,e.createClient)("https://bvigrmajwdfpavxmxefl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ2aWdybWFqd2RmcGF2eG14ZWZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2NTE2MzAsImV4cCI6MjA4MzIyNzYzMH0.Qii8jaaMgtH5Sq-C7YfpQ26AmGnMmh3aEbsTX8Ciyg0"),_=[107.6191,-6.9175];function aa(){let a=(0,d.useRouter)(),[e,j]=(0,c.useState)(!1),[aa,ab]=(0,c.useState)(!0),[ac,ad]=(0,c.useState)(""),[ae,af]=(0,c.useState)(_),[ag,ah]=(0,c.useState)(!1),[ai,aj]=(0,c.useState)(!0),[ak,al]=(0,c.useState)(!1),[am,an]=(0,c.useState)("dashboard"),[ao,ap]=(0,c.useState)(null),[aq,ar]=(0,c.useState)([]),[as,at]=(0,c.useState)([]),[au,av]=(0,c.useState)(null),[aw,ax]=(0,c.useState)(0),[ay,az]=(0,c.useState)(""),[aA,aB]=(0,c.useState)("pending"),[aC,aD]=(0,c.useState)(!1),[aE,aF]=(0,c.useState)(null),aG=(0,c.useRef)(),aH=(0,c.useRef)(null),aI=(0,c.useRef)(new Q.default),aJ=[{id:"dashboard",label:"Ringkasan",icon:f.LayoutDashboard},{id:"tasks",label:"Tugas Jemput",icon:g.Truck},{id:"map",label:"Peta Lokasi",icon:h.MapPin},{id:"history",label:"Riwayat",icon:k},{id:"earnings",label:"Pendapatan",icon:B.Wallet}];(0,c.useEffect)(()=>{j(!0);let a=setInterval(()=>{ad(new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}))},1e3);aP(),aM();let b=$.channel("driver-dashboard").on("postgres_changes",{event:"INSERT",schema:"public",table:"transactions"},a=>{try{let a=new Audio("/sounds/notification.mp3");a.volume=.5,a.play().catch(()=>{})}catch(a){}I.default.fire({title:"ðŸš› Order Baru!",text:"Ada permintaan pickup baru menunggu Anda.",icon:"info",toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,background:"#ecfdf5",color:"#065f46"}),aP()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"transactions"},()=>{aP()}).subscribe(),c=()=>{window.innerWidth>=768&&al(!1)};return window.addEventListener("resize",c),()=>{clearInterval(a),window.removeEventListener("resize",c),$.removeChannel(b)}},[]);let[aK,aL]=(0,c.useState)(0),aM=()=>{navigator.geolocation&&navigator.geolocation.watchPosition(async a=>{let{latitude:b,longitude:c,heading:d}=a.coords;if(af([c,b]),null===d||isNaN(d)||aL(Math.PI/180*d),ah(!0),au?.id)try{await $.from("drivers").update({current_latitude:b,current_longitude:c,last_location_update:new Date}).eq("id",au.id)}catch(a){console.error("Gagal update lokasi driver:",a)}},a=>{console.warn("GPS Error:",a.message)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})},aN=()=>{aH.current&&ag?aH.current.getView().animate({center:(0,U.fromLonLat)(ae),zoom:17,duration:1e3}):I.default.fire("GPS Mencari...","Pastikan izin lokasi aktif dan tunggu sinyal.","info")};(0,c.useEffect)(()=>{if("map"===am&&aG.current&&!aH.current){let a=new P.default({source:aI.current,zIndex:100});aH.current=new L.default({target:aG.current,layers:[new N.default({source:new O.default}),a],view:new M.default({center:(0,U.fromLonLat)(_),zoom:13}),controls:[]}),aO()}return()=>{"map"!==am&&aH.current&&(aH.current.setTarget(null),aH.current=null)}},[am,e]);let aO=()=>{if(aH.current){if(aI.current.clear(),ag){let a=new R.default({geometry:new S.default((0,U.fromLonLat)(ae))});a.setStyle(new W.Style({image:new Y.Circle({radius:8,fill:new Z.Fill({color:"#3b82f6"}),stroke:new X.Stroke({color:"#fff",width:2})})})),aI.current.addFeature(a);let b=new R.default({geometry:new S.default((0,U.fromLonLat)(ae))});b.setStyle(new W.Style({image:new V.Icon({src:"https://cdn-icons-png.flaticon.com/512/3096/3096673.png",scale:.08,anchor:[.5,1]})})),aI.current.addFeature(b)}aq.filter(a=>"Pending"===a.status||"Process"===a.status&&a.driver_id===ao?.id).forEach(a=>{if(a.lng&&a.lat){let b=[a.lng,a.lat];if("Process"===a.status&&ag){let a=new R.default({geometry:new T.default([(0,U.fromLonLat)(ae),(0,U.fromLonLat)(b)])});a.setStyle(new W.Style({stroke:new X.Stroke({color:"#10B981",width:4,lineDash:[10,10]})})),aI.current.addFeature(a)}}})}};(0,c.useEffect)(()=>{aO()},[aq,ae,ag,ao,am]);let aP=async()=>{try{let{data:{user:b}}=await $.auth.getUser();if(!b)return void a.push("/login");let{data:c}=await $.from("profiles").select("*").eq("id",b.id).single();ap({...b,...c});let{data:d}=await $.from("drivers").select("*").eq("id",b.id).single();d&&av(d);let{data:e}=await $.from("areas").select("*").eq("driver_id",b.id),{data:f}=await $.from("transactions").select("*, profiles(full_name, address, rt, rw, phone), waste_types(name, price_per_kg)").neq("status","Done").order("created_at",{ascending:!0}),g=(f||[]).filter(a=>{if("Process"===a.status&&a.driver_id===b.id)return!0;if("Pending"===a.status){if(!e||0===e.length)return!0;let b=a.profiles?.rt,c=a.profiles?.rw;return e.some(a=>a.rw==c&&(a.rt==b||!a.rt))}return!1}).map(a=>{let b=a.latitude,c=a.longitude;return b&&c||(b=ae[1]+(.015*Math.random()-.0075),c=ae[0]+(.015*Math.random()-.0075)),{...a,lat:b,lng:c}});ar(g);let{data:h}=await $.from("transactions").select("*, profiles(full_name, address), waste_types(name)").eq("status","Done").eq("driver_id",b.id).order("updated_at",{ascending:!1});at(h||[]);let i=(h||[]).reduce((a,b)=>a+(b.total_price||0),0);ax(i)}catch(a){console.error("Error data:",a)}finally{ab(!1)}},aQ=a=>{an(a),al(!1)},aR=async()=>{await $.auth.signOut(),a.push("/login")},aS=(a,b,c)=>{if(!b)return I.default.fire("Gagal","Nomor HP tidak tersedia.","error");let d=b.replace(/\D/g,"");if(d.startsWith("0")&&(d="62"+d.slice(1)),"whatsapp"===a){let a=`Halo Kak ${c}, saya Driver RecycleYuk sedang menuju lokasi.`;window.open(`https://wa.me/${d}?text=${encodeURIComponent(a)}`,"_blank")}else window.open(`tel:${b}`,"_self")},aT=async(a,b)=>{let c=aq.find(a=>"Process"===a.status&&a.driver_id===ao.id);if("Process"===b){if(c)return I.default.fire("Fokus!","Selesaikan tugas aktif dulu.","warning");if((await I.default.fire({title:"Ambil Tugas?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Jemput!",confirmButtonColor:"#10B981"})).isConfirmed)try{await $.from("transactions").update({status:"Process",driver_id:ao.id}).eq("id",a),I.default.fire("Berhasil!","Segera menuju lokasi!","success"),aP()}catch(a){I.default.fire("Gagal",a.message,"error")}}else if("Done"===b){let b=aq.find(b=>b.id===a),c=b?.waste_types?.price_per_kg||0,d=b?.waste_types?.name||"Sampah",{value:e}=await I.default.fire({title:"Selesaikan Tugas",html:`
                    <div style="text-align: left">
                        <p class="mb-2">Jenis: <b>${d}</b></p>
                        <p class="mb-2">Harga: <b>Rp ${c.toLocaleString()}/kg</b></p>
                        <label class="block text-sm font-bold mb-1">Berat Aktual (Kg):</label>
                    </div>
                `,input:"number",inputAttributes:{min:"0.1",step:"0.1",placeholder:"Contoh: 5.5"},inputValue:b?.weight||"",showCancelButton:!0,confirmButtonText:"Hitung & Selesai",confirmButtonColor:"#3b82f6",preConfirm:a=>((!a||a<=0)&&I.default.showValidationMessage("Masukkan berat yang valid!"),a)});if(e){let b=Math.round(parseFloat(e)*c);if((await I.default.fire({title:"Konfirmasi Akhir",html:`
                        <div class="text-center">
                            <p>Berat: <b>${e} Kg</b></p>
                            <p class="text-xl font-bold text-green-600 mt-2">Total: Rp ${b.toLocaleString()}</p>
                        </div>
                    `,icon:"info",showCancelButton:!0,confirmButtonText:"Simpan & Selesai"})).isConfirmed)try{await $.from("transactions").update({status:"Done",final_weight:parseFloat(e),total_price:b,weight:parseFloat(e)}).eq("id",a),I.default.fire("Tugas Selesai!",`Saldo Rp ${b.toLocaleString()} dicatat.`,"success"),aP()}catch(a){I.default.fire("Gagal",a.message,"error")}}}},aU=async()=>{if(!au)return;if("verified"!==au.verification_status)return I.default.fire({title:"Akun Belum Terverifikasi",text:"Harap hubungi Admin untuk verifikasi akun sebelum mulai bekerja.",icon:"warning",confirmButtonColor:"#F59E0B"});let a="On Duty"===au.status?"Off Duty":"On Duty";try{await $.from("drivers").update({status:a}).eq("id",au.id),av({...au,status:a}),I.default.fire("Status",`Anda sekarang ${a}`,"success")}catch(a){I.default.fire("Error","Gagal update status","error")}},aV=async a=>{let b=a.target.files[0];if(b)try{I.default.fire({title:"Mengupload...",text:"Mohon tunggu sebentar",allowOutsideClick:!1,didOpen:()=>I.default.showLoading()});let a=await (0,J.uploadAvatar)(b,ao.id);if(!a)throw Error("Gagal mendapatkan URL gambar.");let{error:c}=await $.from("profiles").update({avatar_url:a}).eq("id",ao.id);if(c)throw c;ap(b=>({...b,avatar_url:a})),I.default.fire("Sukses","Foto profil berhasil diperbarui!","success")}catch(a){console.error(a),I.default.fire("Error","Gagal upload foto: "+a.message,"error")}};return aa?(0,b.jsxs)("div",{className:"min-h-screen flex justify-center items-center text-gray-800 font-bold",children:[(0,b.jsx)(y.Loader2,{className:"animate-spin mr-2"})," Memuat..."]}):(0,b.jsxs)("div",{className:"min-h-screen bg-slate-50 flex font-sans text-gray-800 overflow-x-hidden",children:[ak&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>al(!1)}),(0,b.jsxs)("aside",{className:`fixed top-0 left-0 z-50 h-full bg-white border-r border-gray-200 transition-transform duration-300 md:translate-x-0 ${ak?"translate-x-0 w-64":"-translate-x-full w-64"} ${ai?"md:w-64":"md:w-20"} flex flex-col shadow-[4px_0_24px_rgba(0,0,0,0.02)]`,children:[(0,b.jsxs)("div",{className:"h-20 flex items-center justify-between px-5 border-b border-gray-100",children:[(0,b.jsx)("div",{className:`flex items-center gap-3 transition-all duration-300 ${!ai?"justify-center w-full px-0":"px-0"}`,children:ai?(0,b.jsx)("div",{className:"flex flex-col animate-in fade-in slide-in-from-left duration-300",children:(0,b.jsx)("img",{src:"/images/logo.png",alt:"Logo",className:"w-36 h-auto object-contain mb-1"})}):(0,b.jsxs)("button",{onClick:()=>aj(!0),className:"mx-auto relative group",children:[(0,b.jsx)("img",{src:"/images/mini-logo.png",alt:"RecycleYuk",className:"w-10 h-10 object-contain transition-transform group-hover:scale-110"}),(0,b.jsx)("div",{className:"absolute -right-2 -bottom-2 bg-green-100 text-green-600 rounded-full p-0.5 shadow-sm border border-white",children:(0,b.jsx)(q.ChevronRight,{size:12})})]})}),ai&&(0,b.jsx)("button",{onClick:()=>aj(!1),className:"hidden md:block p-2 hover:bg-gray-100 rounded-xl text-gray-500 transition",children:(0,b.jsx)(p.ChevronLeft,{})}),(0,b.jsx)("button",{onClick:()=>al(!1),className:"md:hidden p-2 text-gray-500",children:(0,b.jsx)(o.X,{})})]}),(0,b.jsx)("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:aJ.map(a=>(0,b.jsxs)("button",{onClick:()=>aQ(a.id),className:`w-full flex items-center gap-3 p-3.5 rounded-xl transition-all duration-200 font-medium ${am===a.id?"bg-green-50 text-green-700 shadow-sm ring-1 ring-green-100":"text-gray-500 hover:bg-gray-50 hover:text-green-600"} ${!ai&&"justify-center px-0"}`,children:[(0,b.jsx)(a.icon,{size:22,strokeWidth:am===a.id?2.5:2}),(0,b.jsx)("span",{className:`${!ai?"md:hidden":"block"}`,children:a.label})]},a.id))}),(0,b.jsx)("div",{className:"p-4 border-t border-gray-100",children:(0,b.jsxs)("button",{onClick:aR,className:`w-full flex items-center rounded-xl font-medium text-red-600 hover:bg-red-50 transition-all h-12 ${ai?"px-4 gap-3 justify-start":"justify-center px-0"}`,children:[(0,b.jsx)(m.LogOut,{size:22,className:"min-w-[22px]"})," ",ai&&"Keluar"]})})]}),(0,b.jsxs)("main",{className:`flex-1 p-4 md:p-8 transition-all duration-300 ${ai?"md:ml-64":"md:ml-20"}`,children:[(0,b.jsxs)("div",{className:"md:hidden flex justify-between items-center mb-6 sticky top-0 bg-slate-50/90 backdrop-blur-md z-30 py-3 px-1 border-b border-slate-200",children:[(0,b.jsx)("button",{onClick:()=>al(!0),className:"p-2 -ml-2",children:(0,b.jsx)(n.Menu,{})}),(0,b.jsx)("span",{className:"font-bold text-lg capitalize text-gray-800",children:am}),(0,b.jsx)("button",{onClick:()=>aQ("profile"),className:"w-9 h-9 bg-green-100 rounded-full flex items-center justify-center font-bold text-green-700 border border-green-200",children:ao?.full_name?.charAt(0)})]}),(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("header",{className:"hidden md:flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold capitalize text-gray-800 tracking-tight",children:"dashboard"===am?"Ringkasan":"history"===am?"Riwayat":"tasks"===am?"Tugas Jemput":"map"===am?"Peta Lokasi":"Profil"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Dashboard Operasional Driver"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 bg-white p-1 rounded-xl border border-gray-200 shadow-sm",children:[(0,b.jsx)("button",{className:"p-2 rounded-lg hover:bg-gray-100 relative text-gray-600 group transition",children:(0,b.jsx)(G.Bell,{size:20,className:"group-hover:text-green-600"})}),(0,b.jsx)("div",{className:"w-px h-6 bg-gray-200"}),(0,b.jsxs)("button",{onClick:()=>aQ("profile"),className:"flex items-center gap-3 pl-2 pr-3 py-1 rounded-lg hover:bg-gray-50 transition",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-700 font-bold border border-green-200 overflow-hidden",children:ao?.avatar_url?(0,b.jsx)("img",{src:ao.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):ao?.full_name?.charAt(0)||"D"}),(0,b.jsxs)("div",{className:"text-left hidden md:block",children:[(0,b.jsx)("p",{className:"text-xs font-bold text-gray-800 line-clamp-1 max-w-[100px]",children:ao?.full_name}),(0,b.jsx)("p",{className:"text-0 text-gray-500",children:"Driver"})]})]})]})]}),(()=>{switch(am){case"dashboard":return(0,b.jsxs)("div",{className:"space-y-6 animate-in fade-in pb-20 md:pb-0",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-6 md:p-8 text-white shadow-lg relative overflow-hidden",children:[(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:["Halo, ",ao?.full_name?.split(" ")[0],"! ðŸš›"]}),(0,b.jsx)("p",{className:"opacity-90",children:"Siap menjemput rezeki dan menjaga lingkungan hari ini?"}),(0,b.jsxs)("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"inline-flex items-center bg-white/20 backdrop-blur-sm px-4 py-2 rounded-lg border border-white/30",children:[(0,b.jsx)("span",{className:`w-3 h-3 rounded-full mr-2 ${au?.status==="On Duty"?"bg-green-400 animate-pulse":"bg-red-400"}`}),(0,b.jsxs)("span",{className:"font-medium text-sm",children:["Status: ",au?au.status||"Off Duty":aa?"Loading...":"Tidak Terdaftar"]})]}),(0,b.jsxs)("div",{className:`inline-flex items-center px-4 py-2 rounded-lg border border-white/30 backdrop-blur-sm ${au?.verification_status==="verified"?"bg-green-500/20 text-white":"bg-yellow-500/20 text-yellow-100"}`,children:[au?.verification_status==="verified"?(0,b.jsx)(v.CheckCircle2,{size:16,className:"mr-2"}):(0,b.jsx)(w.AlertCircle,{size:16,className:"mr-2"}),(0,b.jsx)("span",{className:"font-bold text-sm uppercase",children:au?.verification_status||"Pending"})]}),(0,b.jsx)("button",{onClick:aU,disabled:!au&&!aa,className:`text-xs px-3 py-2 rounded-lg font-bold transition shadow-md ${!au&&!aa?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-white text-green-700 hover:bg-green-50"}`,children:aa?"...":au?"On Duty"===au.status?"Matikan":"Aktifkan":"Hubungi Admin"})]})]}),(0,b.jsx)(g.Truck,{className:"absolute right-[-10px] bottom-[-10px] opacity-10 w-32 h-32 md:w-40 md:h-40 transform -rotate-12"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[(0,b.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center transition hover:shadow-md",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wide",children:"Order Masuk"}),(0,b.jsx)("h3",{className:"text-3xl font-bold text-gray-800 mt-1",children:aq.filter(a=>"Pending"===a.status).length})]}),(0,b.jsx)("div",{className:"bg-yellow-50 p-3 rounded-xl text-yellow-600 border border-yellow-100",children:(0,b.jsx)(w.AlertCircle,{size:28})})]}),(0,b.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center transition hover:shadow-md border-l-4 border-l-green-500",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wide",children:"Total Pendapatan"}),(0,b.jsxs)("h3",{className:"text-2xl font-bold text-green-700 mt-1",children:["Rp ",aw.toLocaleString("id-ID")]})]}),(0,b.jsx)("div",{className:"bg-green-50 p-3 rounded-xl text-green-600 border border-green-100",children:(0,b.jsx)(B.Wallet,{size:28})})]}),(0,b.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center transition hover:shadow-md",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wide",children:"Tugas Selesai"}),(0,b.jsx)("h3",{className:"text-3xl font-bold text-blue-600 mt-1",children:as.length})]}),(0,b.jsx)("div",{className:"bg-blue-50 p-3 rounded-xl text-blue-600 border border-blue-100",children:(0,b.jsx)(v.CheckCircle2,{size:28})})]})]}),aq.filter(a=>"Process"===a.status&&a.driver_id===ao?.id).map(a=>(0,b.jsxs)("div",{className:"bg-white border border-blue-200 rounded-2xl p-6 shadow-lg shadow-blue-50 animate-in slide-in-from-bottom duration-500 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-2 h-full bg-blue-500"}),(0,b.jsxs)("div",{className:"flex justify-between items-start mb-6 border-b border-gray-100 pb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-bold text-xl text-gray-800 flex items-center gap-2",children:[(0,b.jsx)(g.Truck,{className:"text-blue-600"})," Sedang Dijemput"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Order ID: #",String(a.id).slice(0,8)]})]}),(0,b.jsx)("span",{className:"bg-blue-100 text-blue-700 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide shadow-sm",children:"PROCESS"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"bg-blue-50 p-2 rounded-lg text-blue-600",children:(0,b.jsx)(l.User,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Nama Warga"}),(0,b.jsx)("p",{className:"text-gray-800 font-bold text-lg",children:a.profiles?.full_name})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"bg-red-50 p-2 rounded-lg text-red-600",children:(0,b.jsx)(h.MapPin,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Alamat"}),(0,b.jsx)("p",{className:"text-gray-800 font-medium leading-relaxed",children:a.profiles?.address})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"bg-orange-50 p-2 rounded-lg text-orange-600",children:(0,b.jsx)(x,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Detail Sampah"}),(0,b.jsxs)("p",{className:"text-gray-800 font-medium",children:[a.waste_types?.name," â€¢ ",(0,b.jsxs)("span",{className:"font-bold",children:[a.weight," Kg"]})]}),(0,b.jsxs)("p",{className:"text-sm text-green-600 font-bold mt-1",children:["Rp ",a.total_price?.toLocaleString()]})]})]}),(0,b.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-xl border border-yellow-100 text-sm text-yellow-800 flex gap-2",children:[(0,b.jsx)(w.AlertCircle,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Catatan:"}),' "',a.notes||"Tidak ada catatan",'"']})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[(0,b.jsxs)("button",{onClick:()=>aS("whatsapp",a.profiles?.phone,a.profiles?.full_name),className:"flex items-center justify-center gap-2 py-3 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 transition shadow-sm",children:[(0,b.jsx)(A.MessageCircle,{size:20})," Chat WA"]}),(0,b.jsxs)("button",{onClick:()=>aS("call",a.profiles?.phone),className:"flex items-center justify-center gap-2 py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-sm",children:[(0,b.jsx)(z.Phone,{size:20})," Telepon"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t border-gray-100",children:[(0,b.jsxs)("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a.profiles?.address)}`,target:"_blank",className:"flex justify-center items-center gap-2 py-3 bg-white text-gray-700 font-bold rounded-xl border-2 border-gray-100 hover:bg-gray-50 hover:border-gray-300 transition",children:[(0,b.jsx)(s.Navigation,{size:20})," Buka Maps"]}),(0,b.jsxs)("button",{onClick:()=>aT(a.id,"Done"),className:"flex justify-center items-center gap-2 bg-blue-800 text-white py-3 rounded-xl font-bold hover:bg-blue-900 transition shadow-lg shadow-blue-200",children:[(0,b.jsx)(i.CheckCircle,{size:20})," Selesai Tugas"]})]})]},a.id))]});case"tasks":let a,c;return a=aq.filter(a=>"Pending"===a.status&&(a.profiles?.full_name||"").toLowerCase().includes(ay.toLowerCase())),c=aq.filter(a=>"Process"===a.status&&a.driver_id===ao?.id),(0,b.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-right pb-20 md:pb-0",children:[(0,b.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-200 flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-bold text-lg text-gray-800 ml-2",children:"Daftar Tugas"}),(0,b.jsxs)("div",{className:"relative w-full md:w-80",children:[(0,b.jsx)(r.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,b.jsx)("input",{type:"text",placeholder:"Cari lokasi atau nama warga...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-xl outline-none focus:ring-2 ring-green-500 transition",value:ay,onChange:a=>az(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[(0,b.jsxs)("button",{onClick:()=>aB("pending"),className:`flex items-center gap-2 px-5 py-2.5 rounded-xl font-bold text-sm transition whitespace-nowrap ${"pending"===aA?"bg-yellow-500 text-white shadow-lg shadow-yellow-200":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,children:[(0,b.jsx)(t.Clock,{size:16}),"Pending",(0,b.jsx)("span",{className:`ml-1 px-2 py-0.5 rounded-full text-xs ${"pending"===aA?"bg-yellow-600":"bg-gray-200 text-gray-600"}`,children:a.length})]}),(0,b.jsxs)("button",{onClick:()=>aB("process"),className:`flex items-center gap-2 px-5 py-2.5 rounded-xl font-bold text-sm transition whitespace-nowrap ${"process"===aA?"bg-blue-500 text-white shadow-lg shadow-blue-200":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,children:[(0,b.jsx)(g.Truck,{size:16}),"Proses",(0,b.jsx)("span",{className:`ml-1 px-2 py-0.5 rounded-full text-xs ${"process"===aA?"bg-blue-600":"bg-gray-200 text-gray-600"}`,children:c.length})]})]}),"pending"===aA&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.map(a=>(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200 hover:shadow-lg transition duration-300 group",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-green-600 transition",children:a.profiles?.full_name}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1 bg-gray-50 px-2 py-1 rounded w-fit",children:[(0,b.jsx)(t.Clock,{size:12})," ",new Date(a.created_at).toLocaleString()]})]}),(0,b.jsx)("span",{className:"bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-xs font-bold border border-yellow-200 shadow-sm",children:"PENDING"})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 space-y-3 mb-6 bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,b.jsx)(h.MapPin,{size:18,className:"text-red-500 flex-shrink-0 mt-0.5"}),(0,b.jsx)("span",{className:"line-clamp-2 font-medium",children:a.profiles?.address})]}),(0,b.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,b.jsx)(x,{size:18,className:"text-blue-500 flex-shrink-0"}),(0,b.jsxs)("span",{children:[a.waste_types?.name," â€¢ ",(0,b.jsxs)("span",{className:"font-bold text-gray-800",children:[a.weight," Kg"]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,b.jsx)(t.Clock,{size:18,className:"text-orange-500 flex-shrink-0"}),(0,b.jsxs)("span",{children:["Jadwal: ",a.pickup_time]})]})]}),(0,b.jsxs)("button",{onClick:()=>aT(a.id,"Process"),className:"w-full bg-green-600 text-white py-3.5 rounded-xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 shadow-md shadow-green-100",children:[(0,b.jsx)(g.Truck,{size:20})," Ambil Tugas Ini"]})]},a.id)),0===a.length&&(0,b.jsxs)("div",{className:"col-span-full py-16 text-center text-gray-400 bg-white border-2 border-dashed border-gray-200 rounded-2xl",children:[(0,b.jsx)("div",{className:"bg-gray-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(t.Clock,{size:40,className:"text-gray-300"})}),(0,b.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"Tidak ada order pending saat ini."}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Silakan tunggu notifikasi order baru."})]})]}),"process"===aA&&(0,b.jsxs)("div",{className:"space-y-4",children:[c.map(a=>(0,b.jsxs)("div",{className:"bg-white border border-blue-200 rounded-2xl p-6 shadow-lg shadow-blue-50 animate-in slide-in-from-bottom duration-500 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-2 h-full bg-blue-500"}),(0,b.jsxs)("div",{className:"flex justify-between items-start mb-6 border-b border-gray-100 pb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-bold text-xl text-gray-800 flex items-center gap-2",children:[(0,b.jsx)(g.Truck,{className:"text-blue-600"})," Sedang Dijemput"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Order ID: #",String(a.id).slice(0,8)]})]}),(0,b.jsx)("span",{className:"bg-blue-100 text-blue-700 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide shadow-sm",children:"PROCESS"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"bg-blue-50 p-2 rounded-lg text-blue-600",children:(0,b.jsx)(l.User,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Nama Warga"}),(0,b.jsx)("p",{className:"text-gray-800 font-bold text-lg",children:a.profiles?.full_name})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"bg-red-50 p-2 rounded-lg text-red-600",children:(0,b.jsx)(h.MapPin,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Alamat"}),(0,b.jsx)("p",{className:"text-gray-800 font-medium leading-relaxed",children:a.profiles?.address})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"bg-orange-50 p-2 rounded-lg text-orange-600",children:(0,b.jsx)(x,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Detail Sampah"}),(0,b.jsxs)("p",{className:"text-gray-800 font-medium",children:[a.waste_types?.name," â€¢ ",(0,b.jsxs)("span",{className:"font-bold",children:[a.weight," Kg"]})]}),(0,b.jsxs)("p",{className:"text-sm text-green-600 font-bold mt-1",children:["Rp ",a.total_price?.toLocaleString()]})]})]}),(0,b.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-xl border border-yellow-100 text-sm text-yellow-800 flex gap-2",children:[(0,b.jsx)(w.AlertCircle,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Catatan:"}),' "',a.notes||"Tidak ada catatan",'"']})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[(0,b.jsxs)("button",{onClick:()=>{aF(a),aD(!0)},className:"flex items-center justify-center gap-2 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-sm",children:[(0,b.jsx)(A.MessageCircle,{size:20})," Chat App"]}),(0,b.jsxs)("button",{onClick:()=>aS("whatsapp",a.profiles?.phone,a.profiles?.full_name),className:"flex items-center justify-center gap-2 py-3 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 transition shadow-sm",children:[(0,b.jsx)(A.MessageCircle,{size:20})," WhatsApp"]}),(0,b.jsxs)("button",{onClick:()=>aS("call",a.profiles?.phone),className:"flex items-center justify-center gap-2 py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-sm",children:[(0,b.jsx)(z.Phone,{size:20})," Telepon"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t border-gray-100",children:[(0,b.jsxs)("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a.profiles?.address)}`,target:"_blank",className:"flex justify-center items-center gap-2 py-3 bg-white text-gray-700 font-bold rounded-xl border-2 border-gray-100 hover:bg-gray-50 hover:border-gray-300 transition",children:[(0,b.jsx)(s.Navigation,{size:20})," Buka Maps"]}),(0,b.jsxs)("button",{onClick:()=>aT(a.id,"Done"),className:"flex justify-center items-center gap-2 bg-blue-800 text-white py-3 rounded-xl font-bold hover:bg-blue-900 transition shadow-lg shadow-blue-200",children:[(0,b.jsx)(i.CheckCircle,{size:20})," Selesai Tugas"]})]})]},a.id)),0===c.length&&(0,b.jsxs)("div",{className:"py-16 text-center text-gray-400 bg-white border-2 border-dashed border-gray-200 rounded-2xl",children:[(0,b.jsx)("div",{className:"bg-gray-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(g.Truck,{size:40,className:"text-gray-300"})}),(0,b.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"Tidak ada tugas aktif saat ini."}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Ambil tugas dari tab Pending untuk mulai bekerja."})]})]})]});case"map":return(0,b.jsxs)("div",{className:"h-[calc(100vh-140px)] bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden relative animate-in fade-in z-0",children:[(0,b.jsx)("div",{ref:aG,style:{width:"100%",height:"100%"}}),(0,b.jsx)("button",{onClick:aN,className:"absolute bottom-6 right-6 z-[400] bg-white p-3 rounded-full shadow-lg text-blue-600 hover:bg-blue-50 border border-gray-200 transition transform hover:scale-110",title:"Lokasi Saya",children:(0,b.jsx)(s.Navigation,{size:24})}),(0,b.jsxs)("div",{className:"absolute top-4 right-4 z-[400] bg-white/90 backdrop-blur px-4 py-2 rounded-lg shadow-md text-xs font-bold text-gray-700 border border-gray-200 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),aq.filter(a=>"Pending"===a.status).length," Lokasi Penjemputan"]})]});case"history":return(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 animate-in slide-in-from-right overflow-hidden",children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-100 bg-gray-50/50",children:(0,b.jsxs)("h3",{className:"font-bold text-lg text-gray-800 flex items-center gap-2",children:[(0,b.jsx)(k,{className:"text-gray-500"})," Riwayat Selesai"]})}),(0,b.jsxs)("div",{className:"divide-y divide-gray-100",children:[as.map(a=>(0,b.jsxs)("div",{className:"p-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 hover:bg-gray-50 transition duration-200",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2 md:mb-0 md:justify-start md:gap-4",children:[(0,b.jsx)("p",{className:"font-bold text-gray-800 text-lg",children:a.profiles?.full_name}),(0,b.jsx)("span",{className:"md:hidden bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs font-bold",children:"Done"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 mt-1",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1 bg-white border px-2 py-0.5 rounded",children:[(0,b.jsx)(u.Calendar,{size:12})," ",new Date(a.updated_at).toLocaleDateString()]}),(0,b.jsxs)("span",{className:"flex items-center gap-1 bg-white border px-2 py-0.5 rounded",children:[(0,b.jsx)(t.Clock,{size:12})," ",new Date(a.updated_at).toLocaleTimeString()]})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1",children:[(0,b.jsx)(h.MapPin,{size:12})," ",a.profiles?.address]})]}),(0,b.jsxs)("div",{className:"text-right flex flex-col items-end min-w-[120px]",children:[(0,b.jsxs)("span",{className:"hidden md:flex bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border border-green-200 items-center gap-1 mb-2",children:[(0,b.jsx)(v.CheckCircle2,{size:12})," Selesai"]}),(0,b.jsxs)("p",{className:"text-xl font-bold text-green-700",children:["Rp ",a.total_price?.toLocaleString()]}),(0,b.jsxs)("p",{className:"text-xs text-gray-400",children:[a.waste_types?.name," (",a.weight," Kg)"]})]})]},a.id)),0===as.length&&(0,b.jsxs)("div",{className:"p-16 text-center text-gray-400 flex flex-col items-center justify-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,b.jsx)(k,{size:32,className:"text-gray-300"})}),(0,b.jsx)("p",{className:"font-medium text-gray-600",children:"Belum ada riwayat tugas selesai."}),(0,b.jsx)("p",{className:"text-sm",children:"Riwayat akan muncul setelah Anda menyelesaikan tugas."})]})]})]});case"earnings":let d,e;return d=(0,J.calculateDriverEarnings)(as.map(a=>({...a,created_at:a.updated_at||new Date().toISOString(),total_price:a.total_price||0,status:"done"}))),e=async()=>{if(!as.length)return void I.default.fire("Info","Tidak ada data untuk diexport","info");let a=as.map(a=>({Tanggal:new Date(a.updated_at).toLocaleDateString("id-ID"),Pelanggan:a.profiles?.full_name||"-","Jenis Sampah":a.waste_types?.name||"-","Berat (kg)":a.weight,"Total Transaksi":(0,J.formatRupiah)(a.total_price||0),"Komisi Driver (15%)":(0,J.formatRupiah)(.15*(a.total_price||0)),Status:a.status}));await (0,J.exportToExcel)(a,"driver_earnings")&&I.default.fire("Berhasil!","Laporan berhasil diexport ke CSV","success")},(0,b.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-right pb-20 md:pb-0",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Pendapatan Driver"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Tracking komisi dan performa Anda"})]}),(0,b.jsxs)("button",{onClick:e,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-green-700 flex items-center gap-2 transition",children:[(0,b.jsx)(E.Download,{size:18})," Export Laporan"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-xl text-white shadow-lg transform hover:scale-105 transition",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"opacity-90 font-medium",children:"Hari Ini"}),(0,b.jsx)(u.Calendar,{size:20,className:"opacity-80"})]}),(0,b.jsx)("h3",{className:"text-2xl md:text-3xl font-bold mb-1",children:(0,J.formatRupiah)(d.today)}),(0,b.jsx)("p",{className:"text-sm opacity-80",children:"Komisi hari ini"})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"Minggu Ini"}),(0,b.jsx)(D,{size:20,className:"text-blue-500"})]}),(0,b.jsx)("h3",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-1",children:(0,J.formatRupiah)(d.thisWeek)}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"7 hari terakhir"})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"Bulan Ini"}),(0,b.jsx)(B.Wallet,{size:20,className:"text-purple-500"})]}),(0,b.jsx)("h3",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-1",children:(0,J.formatRupiah)(d.thisMonth)}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Periode bulan ini"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-amber-400 to-orange-500 p-6 rounded-xl text-white shadow-lg transform hover:scale-105 transition",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"opacity-90 font-medium",children:"Total Keseluruhan"}),(0,b.jsx)(F,{size:20,className:"opacity-80"})]}),(0,b.jsx)("h3",{className:"text-2xl md:text-3xl font-bold mb-1",children:(0,J.formatRupiah)(d.total)}),(0,b.jsxs)("p",{className:"text-sm opacity-80",children:[d.transactionCount," transaksi"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[(0,b.jsx)("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,b.jsx)(x,{size:24,className:"text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Pickup"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:d.transactionCount})]})]})}),(0,b.jsx)("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,b.jsx)(C,{size:24,className:"text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Rata-rata Komisi"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:d.transactionCount>0?(0,J.formatRupiah)(d.total/d.transactionCount):(0,J.formatRupiah)(0)})]})]})}),(0,b.jsx)("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,b.jsx)(t.Clock,{size:24,className:"text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Pickup Hari Ini"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:as.filter(a=>{let b=new Date().toDateString();return new Date(a.updated_at).toDateString()===b}).length})]})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 md:p-6 border-b border-gray-100 bg-gray-50/50",children:(0,b.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[(0,b.jsx)(D,{size:22})," Riwayat Transaksi & Komisi"]})}),0===as.length?(0,b.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,b.jsx)(x,{size:48,className:"mx-auto mb-3 opacity-30"}),(0,b.jsx)("p",{children:"Belum ada transaksi selesai"})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Tanggal"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Pelanggan"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Jenis"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Berat"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-600 uppercase",children:"Total"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-600 uppercase",children:"Komisi (15%)"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:as.slice(0,20).map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:new Date(a.updated_at).toLocaleDateString("id-ID")}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:a.profiles?.full_name||"N/A"}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:a.waste_types?.name||"N/A"}),(0,b.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-700",children:[a.weight," kg"]}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-800",children:(0,J.formatRupiah)(a.total_price||0)}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-right font-bold text-green-600",children:(0,J.formatRupiah)(.15*(a.total_price||0))})]},a.id))})]})})]}),(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,b.jsx)("span",{className:"font-bold",children:"â„¹ï¸ Catatan:"})," Komisi driver adalah 15% dari setiap transaksi yang selesai. Pembayaran komisi dilakukan setiap akhir bulan."]})})]});case"profile":return(0,b.jsx)("div",{className:"space-y-6 animate-in slide-in-from-right pb-20 md:pb-0",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-8 text-white text-center",children:[(0,b.jsxs)("div",{className:"relative group w-24 h-24 mx-auto mb-4 cursor-pointer",onClick:()=>document.getElementById("driver-avatar-upload").click(),children:[(0,b.jsx)("div",{className:"w-full h-full bg-white/20 rounded-full flex items-center justify-center text-4xl font-bold backdrop-blur overflow-hidden border-2 border-white/30",children:ao?.avatar_url?(0,b.jsx)("img",{src:ao.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):ao?.full_name?.charAt(0)||"D"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:(0,b.jsx)(H.Edit2,{className:"text-white",size:24})})]}),(0,b.jsx)("input",{type:"file",id:"driver-avatar-upload",className:"hidden",accept:"image/*",onChange:aV}),(0,b.jsx)("h2",{className:"text-2xl font-bold",children:ao?.full_name||"Driver"}),(0,b.jsx)("p",{className:"opacity-80 mt-1",children:ao?.email}),(0,b.jsx)("span",{className:"inline-block mt-3 bg-white/20 px-4 py-1 rounded-full text-sm font-bold backdrop-blur",children:"ðŸš› Driver Aktif"})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase mb-1",children:"Nama Lengkap"}),(0,b.jsx)("p",{className:"text-gray-800 font-medium",children:ao?.full_name||"-"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase mb-1",children:"Email"}),(0,b.jsx)("p",{className:"text-gray-800 font-medium",children:ao?.email||"-"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase mb-1",children:"No. Telepon"}),(0,b.jsx)("p",{className:"text-gray-800 font-medium",children:au?.phone||ao?.phone||"-"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase mb-1",children:"Kendaraan"}),(0,b.jsx)("p",{className:"text-gray-800 font-medium",children:au?.vehicle||"Pickup Truck"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-100",children:[(0,b.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-green-700",children:as.length}),(0,b.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"Total Selesai"})]}),(0,b.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:aq.filter(a=>"Process"===a.status&&a.driver_id===ao?.id).length}),(0,b.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:"Tugas Aktif"})]}),(0,b.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-700",children:(0,J.formatRupiah)(aw)}),(0,b.jsx)("p",{className:"text-xs text-purple-600 font-medium",children:"Total Komisi"})]}),(0,b.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-xl",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-700",children:"â­ 4.8"}),(0,b.jsx)("p",{className:"text-xs text-orange-600 font-medium",children:"Rating"})]})]})]})]})});default:return(0,b.jsx)("div",{children:"Halaman tidak ditemukan"})}})(),aE&&(0,b.jsx)(K.default,{isOpen:aC,onClose:()=>aD(!1),transactionId:aE.id,currentUserId:ao?.id,currentUserName:ao?.full_name,otherUserName:aE.profiles?.full_name||"User",isDriver:!0})]})]})]})}a.s(["default",()=>aa],66735)}];

//# sourceMappingURL=b47f6_RecycleYuk_RecycleYuk_src_app_dashboard_driver_page_df0fa320.js.map