(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20473,e=>{"use strict";let a=(0,e.i(24784).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>a],20473)},57933,e=>{"use strict";let a=(0,e.i(24784).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>a],57933)},12033,e=>{"use strict";let a=(0,e.i(24784).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>a],12033)},10843,e=>{"use strict";let a=(0,e.i(24784).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>a],10843)},40410,e=>{"use strict";let a=(0,e.i(24784).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],40410)},99608,e=>{"use strict";let a=(0,e.i(24784).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>a],99608)},57625,5772,76500,e=>{"use strict";var a=e.i(24784);let r=(0,a.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>r],57625);let t=(0,a.default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],5772);let s=(0,a.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>s],76500)},30954,e=>{"use strict";e.i(6181);var a=e.i(37936),r=e.i(58413),t=e.i(53625),s=e.i(65455),l=e.i(24784);let i=(0,l.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var n=e.i(57933),o=e.i(10843),d=e.i(20473),c=e.i(57625),m=e.i(5772),u=e.i(40410),g=e.i(76500),x=e.i(99608),p=e.i(12033);let h=(0,l.default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),f=(0,l.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);var y=e.i(72915);let b=(0,s.createClient)("https://bvigrmajwdfpavxmxefl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ2aWdybWFqd2RmcGF2eG14ZWZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2NTE2MzAsImV4cCI6MjA4MzIyNzYzMH0.Qii8jaaMgtH5Sq-C7YfpQ26AmGnMmh3aEbsTX8Ciyg0");function v(){let[e,s]=(0,r.useState)({nama:"",nik:"",alamat:"",rt:"",rw:"",email:"",password:"",confirmPassword:"",platNomor:"",kelurahan:""}),[l,v]=(0,r.useState)("user"),[j,N]=(0,r.useState)(!1),[k,w]=(0,r.useState)(!1),[z,C]=(0,r.useState)(!1),[M,I]=(0,r.useState)(""),q=(0,t.useRouter)(),R=a=>{s({...e,[a.target.name]:a.target.value}),M&&I("")},S=async a=>{if(a.preventDefault(),N(!0),I(""),e.password!==e.confirmPassword){I("Password dan Konfirmasi tidak sama!"),N(!1);return}if(16!==e.nik.length||isNaN(e.nik)){I("NIK harus 16 digit angka!"),N(!1);return}if(("user"===l||"rt"===l||"driver"===l)&&(!e.rt||!e.rw)){I("RT dan RW wajib diisi!"),N(!1);return}try{let{data:a,error:r}=await b.auth.signUp({email:e.email,password:e.password,options:{data:{full_name:e.nama,role:l}}});if(r)throw Error(r.message);if(a?.user){let{error:r}=await b.from("profiles").upsert({id:a.user.id,full_name:e.nama,nik:e.nik,address:e.alamat,email:e.email,role:l,rt:e.rt,rw:e.rw,kelurahan:e.kelurahan,updated_at:new Date().toISOString()},{onConflict:"id"});if(r)throw Error("Gagal simpan profil: "+r.message);"driver"===l&&await b.from("drivers").insert({id:a.user.id,name:e.nama,status:"Off Duty",vehicle:"-",plat_nomor:e.platNomor,verification_status:"pending"}),y.default.fire({title:"Registrasi Berhasil!",text:`Akun ${"rt"===l?"Ketua RT":"driver"===l?"Driver":"Warga"} berhasil dibuat.`,icon:"success",confirmButtonColor:"#10B981"}).then(e=>{e.isConfirmed&&q.push("/login")})}}catch(a){let e=a.message;e.includes("already registered")&&(e="Email sudah terdaftar. Silakan login."),I(e),y.default.fire({title:"Gagal",text:e,icon:"error",confirmButtonColor:"#EF4444"})}finally{N(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 flex items-center justify-center p-4 relative",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:[(0,a.jsx)("div",{className:"absolute top-20 left-10 w-20 h-20 bg-green-200 rounded-full opacity-20 animate-bounce",style:{animationDuration:"3s"}}),(0,a.jsx)("div",{className:"absolute bottom-20 left-1/4 w-24 h-24 bg-teal-200 rounded-full opacity-20 animate-bounce",style:{animationDuration:"5s",animationDelay:"2s"}})]}),(0,a.jsx)("div",{className:"w-full max-w-2xl relative z-10",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden animate-fadeIn",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-8 text-white text-center flex flex-col items-center",children:[(0,a.jsx)("div",{className:"mb-4 bg-white/20 p-3 rounded-2xl backdrop-blur-sm shadow-inner inline-block",children:(0,a.jsx)("img",{src:"/images/logo.png",alt:"RecycleYuk Logo",className:"h-20 w-auto object-contain brightness-0 invert"})}),(0,a.jsx)("p",{className:"text-green-50 text-sm font-medium tracking-wide",children:"Daftar Akun Baru"})]}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("button",{onClick:()=>q.push("/login"),className:"flex items-center gap-2 text-green-600 hover:text-green-700 mb-6 font-bold",children:[(0,a.jsx)(i,{size:16})," Kembali ke Login"]}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Pilih Peran"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6 text-sm",children:"Daftar sesuai peran Anda di lingkungan."}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[{id:"user",label:"Warga",icon:n.User},{id:"driver",label:"Driver",icon:p.Truck},{id:"rt",label:"Ketua RT",icon:h}].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>v(e.id),className:`flex-1 flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all ${l===e.id?"border-green-500 bg-green-50 text-green-700 shadow-md transform scale-105":"border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:[(0,a.jsx)(e.icon,{className:`w-6 h-6 mb-2 ${l===e.id?"text-green-600":"text-gray-400"}`}),(0,a.jsx)("span",{className:"text-sm font-bold",children:e.label})]},e.id))}),M&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-bold",children:"!"})," ",M]}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-5",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.User,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",name:"nama",value:e.nama,onChange:R,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-gray-800",placeholder:"Nama Lengkap",required:!0})]})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIK"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.CreditCard,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",name:"nik",value:e.nik,onChange:e=>{/^\d*$/.test(e.target.value)&&e.target.value.length<=16&&R(e)},className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-gray-800",placeholder:"16 Digit NIK",required:!0})]})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat Lengkap"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.MapPin,{className:"absolute left-3 top-4 text-gray-400",size:20}),(0,a.jsx)("textarea",{name:"alamat",value:e.alamat,onChange:R,rows:"2",className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none resize-none text-gray-800",placeholder:"Jalan, No Rumah",required:!0})]})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kelurahan"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.MapPin,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",name:"kelurahan",value:e.kelurahan,onChange:R,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-gray-800",placeholder:"Nama Kelurahan",required:!0})]})]}),("user"===l||"rt"===l||"driver"===l)&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-green-50 p-4 rounded-xl border border-green-100",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-green-800 mb-1",children:"RT"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f,{className:"absolute left-3 top-3 text-green-600",size:18}),(0,a.jsx)("input",{type:"text",name:"rt",value:e.rt,onChange:R,className:"w-full pl-10 pr-4 py-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-gray-800",placeholder:"001"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-green-800 mb-1",children:"RW"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f,{className:"absolute left-3 top-3 text-green-600",size:18}),(0,a.jsx)("input",{type:"text",name:"rw",value:e.rw,onChange:R,className:"w-full pl-10 pr-4 py-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-gray-800",placeholder:"005"})]})]})]}),"driver"===l&&(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Plat Nomor Kendaraan"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Truck,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("input",{type:"text",name:"platNomor",value:e.platNomor,onChange:R,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-gray-800 uppercase",placeholder:"D 1234 ABC",required:!0})]})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Mail,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("input",{type:"email",name:"email",value:e.email,onChange:R,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-gray-800",placeholder:"email@contoh.com",required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Lock,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("input",{type:k?"text":"password",name:"password",value:e.password,onChange:R,className:"w-full pl-11 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-gray-800",placeholder:"Min 8 karakter",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>w(!k),className:"absolute right-3 top-3 text-gray-400",children:k?(0,a.jsx)(g.EyeOff,{size:20}):(0,a.jsx)(u.Eye,{size:20})})]})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konfirmasi"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Lock,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,a.jsx)("input",{type:z?"text":"password",name:"confirmPassword",value:e.confirmPassword,onChange:R,className:"w-full pl-11 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-gray-800",placeholder:"Ulangi password",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>C(!z),className:"absolute right-3 top-3 text-gray-400",children:z?(0,a.jsx)(g.EyeOff,{size:20}):(0,a.jsx)(u.Eye,{size:20})})]})]})]}),(0,a.jsx)("button",{type:"submit",disabled:j,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3.5 rounded-lg font-bold text-lg hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg flex items-center justify-center gap-2 mt-4 disabled:opacity-70",children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Memproses..."})]}):(0,a.jsxs)(a.Fragment,{children:["Daftar Sekarang ",(0,a.jsx)(x.ArrowRight,{size:20})]})})]})]})]})})]})}e.s(["default",()=>v],30954)}]);