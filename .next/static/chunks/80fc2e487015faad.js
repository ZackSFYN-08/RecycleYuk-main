(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70683,e=>{"use strict";e.i(6181);var t=e.i(37936),s=e.i(58413),a=e.i(53625),r=e.i(65455),l=e.i(43610),i=e.i(12033),n=e.i(20473),d=e.i(10674),o=e.i(24784);let c=(0,o.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var x=e.i(57933),m=e.i(95827),g=e.i(59011),u=e.i(60681),h=e.i(69270),p=e.i(65658),f=e.i(35153),b=e.i(60527),j=e.i(80638),y=e.i(73029),N=e.i(1373),w=e.i(74722);let v=(0,o.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var k=e.i(74474),_=e.i(77572),C=e.i(77746),S=e.i(94156);let z=(0,o.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),T=(0,o.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var D=e.i(90085);let P=(0,o.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var L=e.i(77269),A=e.i(32353),M=e.i(72915),R=e.i(88781),I=e.i(99896),B=e.i(62057),$=e.i(18743),E=e.i(19323),O=e.i(86732),q=e.i(4255),K=e.i(85736),H=e.i(98550),J=e.i(87140),U=e.i(66114),F=e.i(10333),G=e.i(39865),W=e.i(80453),V=e.i(73078),Y=e.i(69191),X=e.i(28148);let Z=(0,r.createClient)("https://bvigrmajwdfpavxmxefl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ2aWdybWFqd2RmcGF2eG14ZWZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2NTE2MzAsImV4cCI6MjA4MzIyNzYzMH0.Qii8jaaMgtH5Sq-C7YfpQ26AmGnMmh3aEbsTX8Ciyg0"),Q=[107.6191,-6.9175];function ee(){let e=(0,a.useRouter)(),[r,o]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(!0),[es,ea]=(0,s.useState)(""),[er,el]=(0,s.useState)(Q),[ei,en]=(0,s.useState)(!1),[ed,eo]=(0,s.useState)(!0),[ec,ex]=(0,s.useState)(!1),[em,eg]=(0,s.useState)("dashboard"),[eu,eh]=(0,s.useState)(null),[ep,ef]=(0,s.useState)([]),[eb,ej]=(0,s.useState)([]),[ey,eN]=(0,s.useState)(null),[ew,ev]=(0,s.useState)(0),[ek,e_]=(0,s.useState)(""),[eC,eS]=(0,s.useState)("pending"),[ez,eT]=(0,s.useState)(!1),[eD,eP]=(0,s.useState)(null),eL=(0,s.useRef)(),eA=(0,s.useRef)(null),eM=(0,s.useRef)(new K.default),eR=[{id:"dashboard",label:"Ringkasan",icon:l.LayoutDashboard},{id:"tasks",label:"Tugas Jemput",icon:i.Truck},{id:"map",label:"Peta Lokasi",icon:n.MapPin},{id:"history",label:"Riwayat",icon:c},{id:"earnings",label:"Pendapatan",icon:S.Wallet}];(0,s.useEffect)(()=>{o(!0);let e=setInterval(()=>{ea(new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}))},1e3);eq(),e$();let t=Z.channel("driver-dashboard").on("postgres_changes",{event:"INSERT",schema:"public",table:"transactions"},e=>{try{let e=new Audio("/sounds/notification.mp3");e.volume=.5,e.play().catch(()=>{})}catch(e){}M.default.fire({title:"ðŸš› Order Baru!",text:"Ada permintaan pickup baru menunggu Anda.",icon:"info",toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,background:"#ecfdf5",color:"#065f46"}),eq()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"transactions"},()=>{eq()}).subscribe(),s=()=>{window.innerWidth>=768&&ex(!1)};return window.addEventListener("resize",s),()=>{clearInterval(e),window.removeEventListener("resize",s),Z.removeChannel(t)}},[]);let[eI,eB]=(0,s.useState)(0),e$=()=>{navigator.geolocation&&navigator.geolocation.watchPosition(async e=>{let{latitude:t,longitude:s,heading:a}=e.coords;if(el([s,t]),null===a||isNaN(a)||eB(Math.PI/180*a),en(!0),ey?.id)try{await Z.from("drivers").update({current_latitude:t,current_longitude:s,last_location_update:new Date}).eq("id",ey.id)}catch(e){console.error("Gagal update lokasi driver:",e)}},e=>{console.warn("GPS Error:",e.message)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})},eE=()=>{eA.current&&ei?eA.current.getView().animate({center:(0,F.fromLonLat)(er),zoom:17,duration:1e3}):M.default.fire("GPS Mencari...","Pastikan izin lokasi aktif dan tunggu sinyal.","info")};(0,s.useEffect)(()=>{if("map"===em&&eL.current&&!eA.current){let e=new q.default({source:eM.current,zIndex:100});eA.current=new B.default({target:eL.current,layers:[new E.default({source:new O.default}),e],view:new $.default({center:(0,F.fromLonLat)(Q),zoom:13}),controls:[]}),eO()}return()=>{"map"!==em&&eA.current&&(eA.current.setTarget(null),eA.current=null)}},[em,r]);let eO=()=>{if(eA.current){if(eM.current.clear(),ei){let e=new H.default({geometry:new J.default((0,F.fromLonLat)(er))});e.setStyle(new W.Style({image:new Y.Circle({radius:8,fill:new X.Fill({color:"#3b82f6"}),stroke:new V.Stroke({color:"#fff",width:2})})})),eM.current.addFeature(e);let t=new H.default({geometry:new J.default((0,F.fromLonLat)(er))});t.setStyle(new W.Style({image:new G.Icon({src:"https://cdn-icons-png.flaticon.com/512/3096/3096673.png",scale:.08,anchor:[.5,1]})})),eM.current.addFeature(t)}ep.filter(e=>"Pending"===e.status||"Process"===e.status&&e.driver_id===eu?.id).forEach(e=>{if(e.lng&&e.lat){let t=[e.lng,e.lat];if("Process"===e.status&&ei){let e=new H.default({geometry:new U.default([(0,F.fromLonLat)(er),(0,F.fromLonLat)(t)])});e.setStyle(new W.Style({stroke:new V.Stroke({color:"#10B981",width:4,lineDash:[10,10]})})),eM.current.addFeature(e)}}})}};(0,s.useEffect)(()=>{eO()},[ep,er,ei,eu,em]);let eq=async()=>{try{let{data:{user:t}}=await Z.auth.getUser();if(!t)return void e.push("/login");let{data:s}=await Z.from("profiles").select("*").eq("id",t.id).single();eh({...t,...s});let{data:a}=await Z.from("drivers").select("*").eq("id",t.id).single();a&&eN(a);let{data:r}=await Z.from("areas").select("*").eq("driver_id",t.id),{data:l}=await Z.from("transactions").select("*, profiles(full_name, address, rt, rw, phone), waste_types(name, price_per_kg)").neq("status","Done").order("created_at",{ascending:!0}),i=(l||[]).filter(e=>{if("Process"===e.status&&e.driver_id===t.id)return!0;if("Pending"===e.status){if(!r||0===r.length)return!0;let t=e.profiles?.rt,s=e.profiles?.rw;return r.some(e=>e.rw==s&&(e.rt==t||!e.rt))}return!1}).map(e=>{let t=e.latitude,s=e.longitude;return t&&s||(t=er[1]+(.015*Math.random()-.0075),s=er[0]+(.015*Math.random()-.0075)),{...e,lat:t,lng:s}});ef(i);let{data:n}=await Z.from("transactions").select("*, profiles(full_name, address), waste_types(name)").eq("status","Done").eq("driver_id",t.id).order("updated_at",{ascending:!1});ej(n||[]);let d=(n||[]).reduce((e,t)=>e+(t.total_price||0),0);ev(d)}catch(e){console.error("Error data:",e)}finally{et(!1)}},eK=e=>{eg(e),ex(!1)},eH=async()=>{await Z.auth.signOut(),e.push("/login")},eJ=(e,t,s)=>{if(!t)return M.default.fire("Gagal","Nomor HP tidak tersedia.","error");let a=t.replace(/\D/g,"");if(a.startsWith("0")&&(a="62"+a.slice(1)),"whatsapp"===e){let e=`Halo Kak ${s}, saya Driver RecycleYuk sedang menuju lokasi.`;window.open(`https://wa.me/${a}?text=${encodeURIComponent(e)}`,"_blank")}else window.open(`tel:${t}`,"_self")},eU=async(e,t)=>{let s=ep.find(e=>"Process"===e.status&&e.driver_id===eu.id);if("Process"===t){if(s)return M.default.fire("Fokus!","Selesaikan tugas aktif dulu.","warning");if((await M.default.fire({title:"Ambil Tugas?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Jemput!",confirmButtonColor:"#10B981"})).isConfirmed)try{await Z.from("transactions").update({status:"Process",driver_id:eu.id}).eq("id",e),M.default.fire("Berhasil!","Segera menuju lokasi!","success"),eq()}catch(e){M.default.fire("Gagal",e.message,"error")}}else if("Done"===t){let t=ep.find(t=>t.id===e),s=t?.waste_types?.price_per_kg||0,a=t?.waste_types?.name||"Sampah",{value:r}=await M.default.fire({title:"Selesaikan Tugas",html:`
                    <div style="text-align: left">
                        <p class="mb-2">Jenis: <b>${a}</b></p>
                        <p class="mb-2">Harga: <b>Rp ${s.toLocaleString()}/kg</b></p>
                        <label class="block text-sm font-bold mb-1">Berat Aktual (Kg):</label>
                    </div>
                `,input:"number",inputAttributes:{min:"0.1",step:"0.1",placeholder:"Contoh: 5.5"},inputValue:t?.weight||"",showCancelButton:!0,confirmButtonText:"Hitung & Selesai",confirmButtonColor:"#3b82f6",preConfirm:e=>((!e||e<=0)&&M.default.showValidationMessage("Masukkan berat yang valid!"),e)});if(r){let t=Math.round(parseFloat(r)*s);if((await M.default.fire({title:"Konfirmasi Akhir",html:`
                        <div class="text-center">
                            <p>Berat: <b>${r} Kg</b></p>
                            <p class="text-xl font-bold text-green-600 mt-2">Total: Rp ${t.toLocaleString()}</p>
                        </div>
                    `,icon:"info",showCancelButton:!0,confirmButtonText:"Simpan & Selesai"})).isConfirmed)try{await Z.from("transactions").update({status:"Done",final_weight:parseFloat(r),total_price:t,weight:parseFloat(r)}).eq("id",e),M.default.fire("Tugas Selesai!",`Saldo Rp ${t.toLocaleString()} dicatat.`,"success"),eq()}catch(e){M.default.fire("Gagal",e.message,"error")}}}},eF=async()=>{if(!ey)return;if("verified"!==ey.verification_status)return M.default.fire({title:"Akun Belum Terverifikasi",text:"Harap hubungi Admin untuk verifikasi akun sebelum mulai bekerja.",icon:"warning",confirmButtonColor:"#F59E0B"});let e="On Duty"===ey.status?"Off Duty":"On Duty";try{await Z.from("drivers").update({status:e}).eq("id",ey.id),eN({...ey,status:e}),M.default.fire("Status",`Anda sekarang ${e}`,"success")}catch(e){M.default.fire("Error","Gagal update status","error")}},eG=async e=>{let t=e.target.files[0];if(t)try{M.default.fire({title:"Mengupload...",text:"Mohon tunggu sebentar",allowOutsideClick:!1,didOpen:()=>M.default.showLoading()});let e=await (0,R.uploadAvatar)(t,eu.id);if(!e)throw Error("Gagal mendapatkan URL gambar.");let{error:s}=await Z.from("profiles").update({avatar_url:e}).eq("id",eu.id);if(s)throw s;eh(t=>({...t,avatar_url:e})),M.default.fire("Sukses","Foto profil berhasil diperbarui!","success")}catch(e){console.error(e),M.default.fire("Error","Gagal upload foto: "+e.message,"error")}};return ee?(0,t.jsxs)("div",{className:"min-h-screen flex justify-center items-center text-gray-800 font-bold",children:[(0,t.jsx)(k.Loader2,{className:"animate-spin mr-2"})," Memuat..."]}):(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50 flex font-sans text-gray-800 overflow-x-hidden",children:[ec&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>ex(!1)}),(0,t.jsxs)("aside",{className:`fixed top-0 left-0 z-50 h-full bg-white border-r border-gray-200 transition-transform duration-300 md:translate-x-0 ${ec?"translate-x-0 w-64":"-translate-x-full w-64"} ${ed?"md:w-64":"md:w-20"} flex flex-col shadow-[4px_0_24px_rgba(0,0,0,0.02)]`,children:[(0,t.jsxs)("div",{className:"h-20 flex items-center justify-between px-5 border-b border-gray-100",children:[(0,t.jsx)("div",{className:`flex items-center gap-3 transition-all duration-300 ${!ed?"justify-center w-full px-0":"px-0"}`,children:ed?(0,t.jsx)("div",{className:"flex flex-col animate-in fade-in slide-in-from-left duration-300",children:(0,t.jsx)("img",{src:"/images/logo.png",alt:"Logo",className:"w-36 h-auto object-contain mb-1"})}):(0,t.jsxs)("button",{onClick:()=>eo(!0),className:"mx-auto relative group",children:[(0,t.jsx)("img",{src:"/images/mini-logo.png",alt:"RecycleYuk",className:"w-10 h-10 object-contain transition-transform group-hover:scale-110"}),(0,t.jsx)("div",{className:"absolute -right-2 -bottom-2 bg-green-100 text-green-600 rounded-full p-0.5 shadow-sm border border-white",children:(0,t.jsx)(p.ChevronRight,{size:12})})]})}),ed&&(0,t.jsx)("button",{onClick:()=>eo(!1),className:"hidden md:block p-2 hover:bg-gray-100 rounded-xl text-gray-500 transition",children:(0,t.jsx)(h.ChevronLeft,{})}),(0,t.jsx)("button",{onClick:()=>ex(!1),className:"md:hidden p-2 text-gray-500",children:(0,t.jsx)(u.X,{})})]}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:eR.map(e=>(0,t.jsxs)("button",{onClick:()=>eK(e.id),className:`w-full flex items-center gap-3 p-3.5 rounded-xl transition-all duration-200 font-medium ${em===e.id?"bg-green-50 text-green-700 shadow-sm ring-1 ring-green-100":"text-gray-500 hover:bg-gray-50 hover:text-green-600"} ${!ed&&"justify-center px-0"}`,children:[(0,t.jsx)(e.icon,{size:22,strokeWidth:em===e.id?2.5:2}),(0,t.jsx)("span",{className:`${!ed?"md:hidden":"block"}`,children:e.label})]},e.id))}),(0,t.jsx)("div",{className:"p-4 border-t border-gray-100",children:(0,t.jsxs)("button",{onClick:eH,className:`w-full flex items-center rounded-xl font-medium text-red-600 hover:bg-red-50 transition-all h-12 ${ed?"px-4 gap-3 justify-start":"justify-center px-0"}`,children:[(0,t.jsx)(m.LogOut,{size:22,className:"min-w-[22px]"})," ",ed&&"Keluar"]})})]}),(0,t.jsxs)("main",{className:`flex-1 p-4 md:p-8 transition-all duration-300 ${ed?"md:ml-64":"md:ml-20"}`,children:[(0,t.jsxs)("div",{className:"md:hidden flex justify-between items-center mb-6 sticky top-0 bg-slate-50/90 backdrop-blur-md z-30 py-3 px-1 border-b border-slate-200",children:[(0,t.jsx)("button",{onClick:()=>ex(!0),className:"p-2 -ml-2",children:(0,t.jsx)(g.Menu,{})}),(0,t.jsx)("span",{className:"font-bold text-lg capitalize text-gray-800",children:em}),(0,t.jsx)("button",{onClick:()=>eK("profile"),className:"w-9 h-9 bg-green-100 rounded-full flex items-center justify-center font-bold text-green-700 border border-green-200",children:eu?.full_name?.charAt(0)})]}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("header",{className:"hidden md:flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold capitalize text-gray-800 tracking-tight",children:"dashboard"===em?"Ringkasan":"history"===em?"Riwayat":"tasks"===em?"Tugas Jemput":"map"===em?"Peta Lokasi":"Profil"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Dashboard Operasional Driver"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 bg-white p-1 rounded-xl border border-gray-200 shadow-sm",children:[(0,t.jsx)("button",{className:"p-2 rounded-lg hover:bg-gray-100 relative text-gray-600 group transition",children:(0,t.jsx)(L.Bell,{size:20,className:"group-hover:text-green-600"})}),(0,t.jsx)("div",{className:"w-px h-6 bg-gray-200"}),(0,t.jsxs)("button",{onClick:()=>eK("profile"),className:"flex items-center gap-3 pl-2 pr-3 py-1 rounded-lg hover:bg-gray-50 transition",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-700 font-bold border border-green-200 overflow-hidden",children:eu?.avatar_url?(0,t.jsx)("img",{src:eu.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):eu?.full_name?.charAt(0)||"D"}),(0,t.jsxs)("div",{className:"text-left hidden md:block",children:[(0,t.jsx)("p",{className:"text-xs font-bold text-gray-800 line-clamp-1 max-w-[100px]",children:eu?.full_name}),(0,t.jsx)("p",{className:"text-0 text-gray-500",children:"Driver"})]})]})]})]}),(()=>{switch(em){case"dashboard":return(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in pb-20 md:pb-0",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-6 md:p-8 text-white shadow-lg relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:["Halo, ",eu?.full_name?.split(" ")[0],"! ðŸš›"]}),(0,t.jsx)("p",{className:"opacity-90",children:"Siap menjemput rezeki dan menjaga lingkungan hari ini?"}),(0,t.jsxs)("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("div",{className:"inline-flex items-center bg-white/20 backdrop-blur-sm px-4 py-2 rounded-lg border border-white/30",children:[(0,t.jsx)("span",{className:`w-3 h-3 rounded-full mr-2 ${ey?.status==="On Duty"?"bg-green-400 animate-pulse":"bg-red-400"}`}),(0,t.jsxs)("span",{className:"font-medium text-sm",children:["Status: ",ey?ey.status||"Off Duty":ee?"Loading...":"Tidak Terdaftar"]})]}),(0,t.jsxs)("div",{className:`inline-flex items-center px-4 py-2 rounded-lg border border-white/30 backdrop-blur-sm ${ey?.verification_status==="verified"?"bg-green-500/20 text-white":"bg-yellow-500/20 text-yellow-100"}`,children:[ey?.verification_status==="verified"?(0,t.jsx)(N.CheckCircle2,{size:16,className:"mr-2"}):(0,t.jsx)(w.AlertCircle,{size:16,className:"mr-2"}),(0,t.jsx)("span",{className:"font-bold text-sm uppercase",children:ey?.verification_status||"Pending"})]}),(0,t.jsx)("button",{onClick:eF,disabled:!ey&&!ee,className:`text-xs px-3 py-2 rounded-lg font-bold transition shadow-md ${!ey&&!ee?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-white text-green-700 hover:bg-green-50"}`,children:ee?"...":ey?"On Duty"===ey.status?"Matikan":"Aktifkan":"Hubungi Admin"})]})]}),(0,t.jsx)(i.Truck,{className:"absolute right-[-10px] bottom-[-10px] opacity-10 w-32 h-32 md:w-40 md:h-40 transform -rotate-12"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[(0,t.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center transition hover:shadow-md",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wide",children:"Order Masuk"}),(0,t.jsx)("h3",{className:"text-3xl font-bold text-gray-800 mt-1",children:ep.filter(e=>"Pending"===e.status).length})]}),(0,t.jsx)("div",{className:"bg-yellow-50 p-3 rounded-xl text-yellow-600 border border-yellow-100",children:(0,t.jsx)(w.AlertCircle,{size:28})})]}),(0,t.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center transition hover:shadow-md border-l-4 border-l-green-500",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wide",children:"Total Pendapatan"}),(0,t.jsxs)("h3",{className:"text-2xl font-bold text-green-700 mt-1",children:["Rp ",ew.toLocaleString("id-ID")]})]}),(0,t.jsx)("div",{className:"bg-green-50 p-3 rounded-xl text-green-600 border border-green-100",children:(0,t.jsx)(S.Wallet,{size:28})})]}),(0,t.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex justify-between items-center transition hover:shadow-md",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500 text-xs font-bold uppercase tracking-wide",children:"Tugas Selesai"}),(0,t.jsx)("h3",{className:"text-3xl font-bold text-blue-600 mt-1",children:eb.length})]}),(0,t.jsx)("div",{className:"bg-blue-50 p-3 rounded-xl text-blue-600 border border-blue-100",children:(0,t.jsx)(N.CheckCircle2,{size:28})})]})]}),ep.filter(e=>"Process"===e.status&&e.driver_id===eu?.id).map(e=>(0,t.jsxs)("div",{className:"bg-white border border-blue-200 rounded-2xl p-6 shadow-lg shadow-blue-50 animate-in slide-in-from-bottom duration-500 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-full bg-blue-500"}),(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6 border-b border-gray-100 pb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-bold text-xl text-gray-800 flex items-center gap-2",children:[(0,t.jsx)(i.Truck,{className:"text-blue-600"})," Sedang Dijemput"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Order ID: #",String(e.id).slice(0,8)]})]}),(0,t.jsx)("span",{className:"bg-blue-100 text-blue-700 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide shadow-sm",children:"PROCESS"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-blue-50 p-2 rounded-lg text-blue-600",children:(0,t.jsx)(x.User,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Nama Warga"}),(0,t.jsx)("p",{className:"text-gray-800 font-bold text-lg",children:e.profiles?.full_name})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-red-50 p-2 rounded-lg text-red-600",children:(0,t.jsx)(n.MapPin,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Alamat"}),(0,t.jsx)("p",{className:"text-gray-800 font-medium leading-relaxed",children:e.profiles?.address})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-orange-50 p-2 rounded-lg text-orange-600",children:(0,t.jsx)(v,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Detail Sampah"}),(0,t.jsxs)("p",{className:"text-gray-800 font-medium",children:[e.waste_types?.name," â€¢ ",(0,t.jsxs)("span",{className:"font-bold",children:[e.weight," Kg"]})]}),(0,t.jsxs)("p",{className:"text-sm text-green-600 font-bold mt-1",children:["Rp ",e.total_price?.toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-xl border border-yellow-100 text-sm text-yellow-800 flex gap-2",children:[(0,t.jsx)(w.AlertCircle,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Catatan:"}),' "',e.notes||"Tidak ada catatan",'"']})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[(0,t.jsxs)("button",{onClick:()=>eJ("whatsapp",e.profiles?.phone,e.profiles?.full_name),className:"flex items-center justify-center gap-2 py-3 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 transition shadow-sm",children:[(0,t.jsx)(C.MessageCircle,{size:20})," Chat WA"]}),(0,t.jsxs)("button",{onClick:()=>eJ("call",e.profiles?.phone),className:"flex items-center justify-center gap-2 py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-sm",children:[(0,t.jsx)(_.Phone,{size:20})," Telepon"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t border-gray-100",children:[(0,t.jsxs)("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.profiles?.address)}`,target:"_blank",className:"flex justify-center items-center gap-2 py-3 bg-white text-gray-700 font-bold rounded-xl border-2 border-gray-100 hover:bg-gray-50 hover:border-gray-300 transition",children:[(0,t.jsx)(b.Navigation,{size:20})," Buka Maps"]}),(0,t.jsxs)("button",{onClick:()=>eU(e.id,"Done"),className:"flex justify-center items-center gap-2 bg-blue-800 text-white py-3 rounded-xl font-bold hover:bg-blue-900 transition shadow-lg shadow-blue-200",children:[(0,t.jsx)(d.CheckCircle,{size:20})," Selesai Tugas"]})]})]},e.id))]});case"tasks":let e,s;return e=ep.filter(e=>"Pending"===e.status&&(e.profiles?.full_name||"").toLowerCase().includes(ek.toLowerCase())),s=ep.filter(e=>"Process"===e.status&&e.driver_id===eu?.id),(0,t.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-right pb-20 md:pb-0",children:[(0,t.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-200 flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-gray-800 ml-2",children:"Daftar Tugas"}),(0,t.jsxs)("div",{className:"relative w-full md:w-80",children:[(0,t.jsx)(f.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,t.jsx)("input",{type:"text",placeholder:"Cari lokasi atau nama warga...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-xl outline-none focus:ring-2 ring-green-500 transition",value:ek,onChange:e=>e_(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[(0,t.jsxs)("button",{onClick:()=>eS("pending"),className:`flex items-center gap-2 px-5 py-2.5 rounded-xl font-bold text-sm transition whitespace-nowrap ${"pending"===eC?"bg-yellow-500 text-white shadow-lg shadow-yellow-200":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,children:[(0,t.jsx)(j.Clock,{size:16}),"Pending",(0,t.jsx)("span",{className:`ml-1 px-2 py-0.5 rounded-full text-xs ${"pending"===eC?"bg-yellow-600":"bg-gray-200 text-gray-600"}`,children:e.length})]}),(0,t.jsxs)("button",{onClick:()=>eS("process"),className:`flex items-center gap-2 px-5 py-2.5 rounded-xl font-bold text-sm transition whitespace-nowrap ${"process"===eC?"bg-blue-500 text-white shadow-lg shadow-blue-200":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,children:[(0,t.jsx)(i.Truck,{size:16}),"Proses",(0,t.jsx)("span",{className:`ml-1 px-2 py-0.5 rounded-full text-xs ${"process"===eC?"bg-blue-600":"bg-gray-200 text-gray-600"}`,children:s.length})]})]}),"pending"===eC&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.map(e=>(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200 hover:shadow-lg transition duration-300 group",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-bold text-gray-800 text-lg group-hover:text-green-600 transition",children:e.profiles?.full_name}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1 flex items-center gap-1 bg-gray-50 px-2 py-1 rounded w-fit",children:[(0,t.jsx)(j.Clock,{size:12})," ",new Date(e.created_at).toLocaleString()]})]}),(0,t.jsx)("span",{className:"bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-xs font-bold border border-yellow-200 shadow-sm",children:"PENDING"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-3 mb-6 bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,t.jsx)(n.MapPin,{size:18,className:"text-red-500 flex-shrink-0 mt-0.5"}),(0,t.jsx)("span",{className:"line-clamp-2 font-medium",children:e.profiles?.address})]}),(0,t.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,t.jsx)(v,{size:18,className:"text-blue-500 flex-shrink-0"}),(0,t.jsxs)("span",{children:[e.waste_types?.name," â€¢ ",(0,t.jsxs)("span",{className:"font-bold text-gray-800",children:[e.weight," Kg"]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,t.jsx)(j.Clock,{size:18,className:"text-orange-500 flex-shrink-0"}),(0,t.jsxs)("span",{children:["Jadwal: ",e.pickup_time]})]})]}),(0,t.jsxs)("button",{onClick:()=>eU(e.id,"Process"),className:"w-full bg-green-600 text-white py-3.5 rounded-xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 shadow-md shadow-green-100",children:[(0,t.jsx)(i.Truck,{size:20})," Ambil Tugas Ini"]})]},e.id)),0===e.length&&(0,t.jsxs)("div",{className:"col-span-full py-16 text-center text-gray-400 bg-white border-2 border-dashed border-gray-200 rounded-2xl",children:[(0,t.jsx)("div",{className:"bg-gray-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(j.Clock,{size:40,className:"text-gray-300"})}),(0,t.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"Tidak ada order pending saat ini."}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Silakan tunggu notifikasi order baru."})]})]}),"process"===eC&&(0,t.jsxs)("div",{className:"space-y-4",children:[s.map(e=>(0,t.jsxs)("div",{className:"bg-white border border-blue-200 rounded-2xl p-6 shadow-lg shadow-blue-50 animate-in slide-in-from-bottom duration-500 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-full bg-blue-500"}),(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6 border-b border-gray-100 pb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"font-bold text-xl text-gray-800 flex items-center gap-2",children:[(0,t.jsx)(i.Truck,{className:"text-blue-600"})," Sedang Dijemput"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Order ID: #",String(e.id).slice(0,8)]})]}),(0,t.jsx)("span",{className:"bg-blue-100 text-blue-700 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide shadow-sm",children:"PROCESS"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-blue-50 p-2 rounded-lg text-blue-600",children:(0,t.jsx)(x.User,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Nama Warga"}),(0,t.jsx)("p",{className:"text-gray-800 font-bold text-lg",children:e.profiles?.full_name})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-red-50 p-2 rounded-lg text-red-600",children:(0,t.jsx)(n.MapPin,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Alamat"}),(0,t.jsx)("p",{className:"text-gray-800 font-medium leading-relaxed",children:e.profiles?.address})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-orange-50 p-2 rounded-lg text-orange-600",children:(0,t.jsx)(v,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase",children:"Detail Sampah"}),(0,t.jsxs)("p",{className:"text-gray-800 font-medium",children:[e.waste_types?.name," â€¢ ",(0,t.jsxs)("span",{className:"font-bold",children:[e.weight," Kg"]})]}),(0,t.jsxs)("p",{className:"text-sm text-green-600 font-bold mt-1",children:["Rp ",e.total_price?.toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-xl border border-yellow-100 text-sm text-yellow-800 flex gap-2",children:[(0,t.jsx)(w.AlertCircle,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Catatan:"}),' "',e.notes||"Tidak ada catatan",'"']})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[(0,t.jsxs)("button",{onClick:()=>{eP(e),eT(!0)},className:"flex items-center justify-center gap-2 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-sm",children:[(0,t.jsx)(C.MessageCircle,{size:20})," Chat App"]}),(0,t.jsxs)("button",{onClick:()=>eJ("whatsapp",e.profiles?.phone,e.profiles?.full_name),className:"flex items-center justify-center gap-2 py-3 bg-green-500 text-white rounded-xl font-bold hover:bg-green-600 transition shadow-sm",children:[(0,t.jsx)(C.MessageCircle,{size:20})," WhatsApp"]}),(0,t.jsxs)("button",{onClick:()=>eJ("call",e.profiles?.phone),className:"flex items-center justify-center gap-2 py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-sm",children:[(0,t.jsx)(_.Phone,{size:20})," Telepon"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t border-gray-100",children:[(0,t.jsxs)("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.profiles?.address)}`,target:"_blank",className:"flex justify-center items-center gap-2 py-3 bg-white text-gray-700 font-bold rounded-xl border-2 border-gray-100 hover:bg-gray-50 hover:border-gray-300 transition",children:[(0,t.jsx)(b.Navigation,{size:20})," Buka Maps"]}),(0,t.jsxs)("button",{onClick:()=>eU(e.id,"Done"),className:"flex justify-center items-center gap-2 bg-blue-800 text-white py-3 rounded-xl font-bold hover:bg-blue-900 transition shadow-lg shadow-blue-200",children:[(0,t.jsx)(d.CheckCircle,{size:20})," Selesai Tugas"]})]})]},e.id)),0===s.length&&(0,t.jsxs)("div",{className:"py-16 text-center text-gray-400 bg-white border-2 border-dashed border-gray-200 rounded-2xl",children:[(0,t.jsx)("div",{className:"bg-gray-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(i.Truck,{size:40,className:"text-gray-300"})}),(0,t.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"Tidak ada tugas aktif saat ini."}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Ambil tugas dari tab Pending untuk mulai bekerja."})]})]})]});case"map":return(0,t.jsxs)("div",{className:"h-[calc(100vh-140px)] bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden relative animate-in fade-in z-0",children:[(0,t.jsx)("div",{ref:eL,style:{width:"100%",height:"100%"}}),(0,t.jsx)("button",{onClick:eE,className:"absolute bottom-6 right-6 z-[400] bg-white p-3 rounded-full shadow-lg text-blue-600 hover:bg-blue-50 border border-gray-200 transition transform hover:scale-110",title:"Lokasi Saya",children:(0,t.jsx)(b.Navigation,{size:24})}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 z-[400] bg-white/90 backdrop-blur px-4 py-2 rounded-lg shadow-md text-xs font-bold text-gray-700 border border-gray-200 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),ep.filter(e=>"Pending"===e.status).length," Lokasi Penjemputan"]})]});case"history":return(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 animate-in slide-in-from-right overflow-hidden",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-100 bg-gray-50/50",children:(0,t.jsxs)("h3",{className:"font-bold text-lg text-gray-800 flex items-center gap-2",children:[(0,t.jsx)(c,{className:"text-gray-500"})," Riwayat Selesai"]})}),(0,t.jsxs)("div",{className:"divide-y divide-gray-100",children:[eb.map(e=>(0,t.jsxs)("div",{className:"p-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 hover:bg-gray-50 transition duration-200",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2 md:mb-0 md:justify-start md:gap-4",children:[(0,t.jsx)("p",{className:"font-bold text-gray-800 text-lg",children:e.profiles?.full_name}),(0,t.jsx)("span",{className:"md:hidden bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs font-bold",children:"Done"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 mt-1",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1 bg-white border px-2 py-0.5 rounded",children:[(0,t.jsx)(y.Calendar,{size:12})," ",new Date(e.updated_at).toLocaleDateString()]}),(0,t.jsxs)("span",{className:"flex items-center gap-1 bg-white border px-2 py-0.5 rounded",children:[(0,t.jsx)(j.Clock,{size:12})," ",new Date(e.updated_at).toLocaleTimeString()]})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1",children:[(0,t.jsx)(n.MapPin,{size:12})," ",e.profiles?.address]})]}),(0,t.jsxs)("div",{className:"text-right flex flex-col items-end min-w-[120px]",children:[(0,t.jsxs)("span",{className:"hidden md:flex bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border border-green-200 items-center gap-1 mb-2",children:[(0,t.jsx)(N.CheckCircle2,{size:12})," Selesai"]}),(0,t.jsxs)("p",{className:"text-xl font-bold text-green-700",children:["Rp ",e.total_price?.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:[e.waste_types?.name," (",e.weight," Kg)"]})]})]},e.id)),0===eb.length&&(0,t.jsxs)("div",{className:"p-16 text-center text-gray-400 flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(c,{size:32,className:"text-gray-300"})}),(0,t.jsx)("p",{className:"font-medium text-gray-600",children:"Belum ada riwayat tugas selesai."}),(0,t.jsx)("p",{className:"text-sm",children:"Riwayat akan muncul setelah Anda menyelesaikan tugas."})]})]})]});case"earnings":let a,r;return a=(0,R.calculateDriverEarnings)(eb.map(e=>({...e,created_at:e.updated_at||new Date().toISOString(),total_price:e.total_price||0,status:"done"}))),r=async()=>{if(!eb.length)return void M.default.fire("Info","Tidak ada data untuk diexport","info");let e=eb.map(e=>({Tanggal:new Date(e.updated_at).toLocaleDateString("id-ID"),Pelanggan:e.profiles?.full_name||"-","Jenis Sampah":e.waste_types?.name||"-","Berat (kg)":e.weight,"Total Transaksi":(0,R.formatRupiah)(e.total_price||0),"Komisi Driver (15%)":(0,R.formatRupiah)(.15*(e.total_price||0)),Status:e.status}));await (0,R.exportToExcel)(e,"driver_earnings")&&M.default.fire("Berhasil!","Laporan berhasil diexport ke CSV","success")},(0,t.jsxs)("div",{className:"space-y-6 animate-in slide-in-from-right pb-20 md:pb-0",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Pendapatan Driver"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Tracking komisi dan performa Anda"})]}),(0,t.jsxs)("button",{onClick:r,className:"bg-green-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-green-700 flex items-center gap-2 transition",children:[(0,t.jsx)(D.Download,{size:18})," Export Laporan"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-xl text-white shadow-lg transform hover:scale-105 transition",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"opacity-90 font-medium",children:"Hari Ini"}),(0,t.jsx)(y.Calendar,{size:20,className:"opacity-80"})]}),(0,t.jsx)("h3",{className:"text-2xl md:text-3xl font-bold mb-1",children:(0,R.formatRupiah)(a.today)}),(0,t.jsx)("p",{className:"text-sm opacity-80",children:"Komisi hari ini"})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"text-gray-500 font-medium",children:"Minggu Ini"}),(0,t.jsx)(T,{size:20,className:"text-blue-500"})]}),(0,t.jsx)("h3",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-1",children:(0,R.formatRupiah)(a.thisWeek)}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"7 hari terakhir"})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"text-gray-500 font-medium",children:"Bulan Ini"}),(0,t.jsx)(S.Wallet,{size:20,className:"text-purple-500"})]}),(0,t.jsx)("h3",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-1",children:(0,R.formatRupiah)(a.thisMonth)}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Periode bulan ini"})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-amber-400 to-orange-500 p-6 rounded-xl text-white shadow-lg transform hover:scale-105 transition",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"opacity-90 font-medium",children:"Total Keseluruhan"}),(0,t.jsx)(P,{size:20,className:"opacity-80"})]}),(0,t.jsx)("h3",{className:"text-2xl md:text-3xl font-bold mb-1",children:(0,R.formatRupiah)(a.total)}),(0,t.jsxs)("p",{className:"text-sm opacity-80",children:[a.transactionCount," transaksi"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[(0,t.jsx)("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,t.jsx)(v,{size:24,className:"text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Total Pickup"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:a.transactionCount})]})]})}),(0,t.jsx)("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,t.jsx)(z,{size:24,className:"text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Rata-rata Komisi"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:a.transactionCount>0?(0,R.formatRupiah)(a.total/a.transactionCount):(0,R.formatRupiah)(0)})]})]})}),(0,t.jsx)("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,t.jsx)(j.Clock,{size:24,className:"text-purple-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Pickup Hari Ini"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:eb.filter(e=>{let t=new Date().toDateString();return new Date(e.updated_at).toDateString()===t}).length})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 md:p-6 border-b border-gray-100 bg-gray-50/50",children:(0,t.jsxs)("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[(0,t.jsx)(T,{size:22})," Riwayat Transaksi & Komisi"]})}),0===eb.length?(0,t.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,t.jsx)(v,{size:48,className:"mx-auto mb-3 opacity-30"}),(0,t.jsx)("p",{children:"Belum ada transaksi selesai"})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Tanggal"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Pelanggan"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Jenis"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase",children:"Berat"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-600 uppercase",children:"Total"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-600 uppercase",children:"Komisi (15%)"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:eb.slice(0,20).map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:new Date(e.updated_at).toLocaleDateString("id-ID")}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:e.profiles?.full_name||"N/A"}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.waste_types?.name||"N/A"}),(0,t.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.weight," kg"]}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-800",children:(0,R.formatRupiah)(e.total_price||0)}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-right font-bold text-green-600",children:(0,R.formatRupiah)(.15*(e.total_price||0))})]},e.id))})]})})]}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,t.jsx)("span",{className:"font-bold",children:"â„¹ï¸ Catatan:"})," Komisi driver adalah 15% dari setiap transaksi yang selesai. Pembayaran komisi dilakukan setiap akhir bulan."]})})]});case"profile":return(0,t.jsx)("div",{className:"space-y-6 animate-in slide-in-from-right pb-20 md:pb-0",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-8 text-white text-center",children:[(0,t.jsxs)("div",{className:"relative group w-24 h-24 mx-auto mb-4 cursor-pointer",onClick:()=>document.getElementById("driver-avatar-upload").click(),children:[(0,t.jsx)("div",{className:"w-full h-full bg-white/20 rounded-full flex items-center justify-center text-4xl font-bold backdrop-blur overflow-hidden border-2 border-white/30",children:eu?.avatar_url?(0,t.jsx)("img",{src:eu.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):eu?.full_name?.charAt(0)||"D"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:(0,t.jsx)(A.Edit2,{className:"text-white",size:24})})]}),(0,t.jsx)("input",{type:"file",id:"driver-avatar-upload",className:"hidden",accept:"image/*",onChange:eG}),(0,t.jsx)("h2",{className:"text-2xl font-bold",children:eu?.full_name||"Driver"}),(0,t.jsx)("p",{className:"opacity-80 mt-1",children:eu?.email}),(0,t.jsx)("span",{className:"inline-block mt-3 bg-white/20 px-4 py-1 rounded-full text-sm font-bold backdrop-blur",children:"ðŸš› Driver Aktif"})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase mb-1",children:"Nama Lengkap"}),(0,t.jsx)("p",{className:"text-gray-800 font-medium",children:eu?.full_name||"-"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase mb-1",children:"Email"}),(0,t.jsx)("p",{className:"text-gray-800 font-medium",children:eu?.email||"-"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase mb-1",children:"No. Telepon"}),(0,t.jsx)("p",{className:"text-gray-800 font-medium",children:ey?.phone||eu?.phone||"-"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 font-bold uppercase mb-1",children:"Kendaraan"}),(0,t.jsx)("p",{className:"text-gray-800 font-medium",children:ey?.vehicle||"Pickup Truck"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-green-700",children:eb.length}),(0,t.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"Total Selesai"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:ep.filter(e=>"Process"===e.status&&e.driver_id===eu?.id).length}),(0,t.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:"Tugas Aktif"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-700",children:(0,R.formatRupiah)(ew)}),(0,t.jsx)("p",{className:"text-xs text-purple-600 font-medium",children:"Total Komisi"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-xl",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-orange-700",children:"â­ 4.8"}),(0,t.jsx)("p",{className:"text-xs text-orange-600 font-medium",children:"Rating"})]})]})]})]})});default:return(0,t.jsx)("div",{children:"Halaman tidak ditemukan"})}})(),eD&&(0,t.jsx)(I.default,{isOpen:ez,onClose:()=>eT(!1),transactionId:eD.id,currentUserId:eu?.id,currentUserName:eu?.full_name,otherUserName:eD.profiles?.full_name||"User",isDriver:!0})]})]})]})}e.s(["default",()=>ee],70683)}]);