(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21289,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let r=e.r(18727);function s({reason:e,children:a}){if("u"<typeof window)throw Object.defineProperty(new r.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}},97432,(e,a,t)=>{"use strict";function r(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return r}})},99541,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return d}});let r=e.r(37936),s=e.r(5087),l=e.r(96041),n=e.r(97432),i=e.r(38421);function d({moduleIds:e}){if("u">typeof window)return null;let a=l.workAsyncStorage.getStore();if(void 0===a)return null;let t=[];if(a.reactLoadableManifest&&e){let r=a.reactLoadableManifest;for(let a of e){if(!r[a])continue;let e=r[a].files;t.push(...e)}}if(0===t.length)return null;let d=(0,i.getDeploymentIdQueryOrEmptyString)();return(0,r.jsx)(r.Fragment,{children:t.map(e=>{let t=`${a.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}${d}`;return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style",nonce:a.nonce},e):((0,s.preload)(t,{as:"script",fetchPriority:"low",nonce:a.nonce}),null)})})}},67296,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let r=e.r(37936),s=e.r(58413),l=e.r(21289),n=e.r(99541);function i(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},o=function(e){let a={...d,...e},t=(0,s.lazy)(()=>a.loader().then(i)),o=a.loading;function c(e){let i=o?(0,r.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,d=!a.ssr||!!a.loading,c=d?s.Suspense:s.Fragment,x=a.ssr?(0,r.jsxs)(r.Fragment,{children:["u"<typeof window?(0,r.jsx)(n.PreloadChunks,{moduleIds:a.modules}):null,(0,r.jsx)(t,{...e})]}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(t,{...e})});return(0,r.jsx)(c,{...d?{fallback:i}:{},children:x})}return c.displayName="LoadableComponent",c}},93822,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let r=e.r(936)._(e.r(67296));function s(e,a){let t={};"function"==typeof e&&(t.loader=e);let s={...t,...a};return(0,r.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),a.exports=t.default)},24565,e=>{"use strict";e.i(6181);var a=e.i(37936),t=e.i(58413),r=e.i(53625),s=e.i(65455);e.i(93822);var l=e.i(43610),n=e.i(58719),i=e.i(85416),d=e.i(20473),o=e.i(35153),c=e.i(90085),x=e.i(24784);let m=(0,x.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);var u=e.i(74722),g=e.i(60681),h=e.i(40410),p=e.i(89199),b=e.i(75227),f=e.i(95827),j=e.i(69270),y=e.i(65658);let N=(0,x.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var v=e.i(94156),w=e.i(77269),k=e.i(32353),S=e.i(88781),_=e.i(72915);let C=(0,s.createClient)("https://bvigrmajwdfpavxmxefl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ2aWdybWFqd2RmcGF2eG14ZWZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2NTE2MzAsImV4cCI6MjA4MzIyNzYzMH0.Qii8jaaMgtH5Sq-C7YfpQ26AmGnMmh3aEbsTX8Ciyg0");function P(){let e=(0,r.useRouter)(),[s,x]=(0,t.useState)("dashboard"),[P,T]=(0,t.useState)(!1),[R,D]=(0,t.useState)(""),[I,M]=(0,t.useState)(!0),[z,O]=(0,t.useState)(!0),[L,A]=(0,t.useState)(null),[E,W]=(0,t.useState)([]),[B,$]=(0,t.useState)([]),[F,q]=(0,t.useState)(0),[K,G]=(0,t.useState)(""),[J,U]=(0,t.useState)("All"),[Y,X]=(0,t.useState)(null),[V,H]=(0,t.useState)(null),[Z,Q]=(0,t.useState)(""),[ee,ea]=(0,t.useState)("monthly"),[et,er]=(0,t.useState)({date:new Date().toISOString().split("T")[0],month:new Date().getMonth()+1,year:new Date().getFullYear(),startDate:"",endDate:"",region:"All"}),es=[{id:"dashboard",label:"Ringkasan",icon:l.LayoutDashboard},{id:"monitoring",label:"Monitoring Global",icon:d.MapPin},{id:"laporan",label:"Laporan & Analitik",icon:p.FileText},{id:"pengaduan",label:"Pusat Pengaduan",icon:m}];(0,t.useEffect)(()=>{T(!0);let e=setInterval(()=>{D(new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}))},1e3);return el(),()=>clearInterval(e)},[]);let el=async()=>{M(!0);try{let{data:{user:a}}=await C.auth.getUser();if(!a)return void e.push("/login");let{data:t}=await C.from("profiles").select("*").eq("id",a.id).single();if(A({...a,...t}),!t)return;let r=C.select("*, profiles!inner(full_name, address, rt, rw), waste_types(name)").order("created_at",{ascending:!1});t.rt&&(r=r.eq("profiles.rt",t.rt)),t.rw&&(r=r.eq("profiles.rw",t.rw));let{data:s,error:l}=await r;l&&console.error("Error fetching transactions:",l),W(s||[]);let n=C.from("complaints").select("*, profiles!inner(full_name, rt, rw)").order("created_at",{ascending:!1});t.rt&&(n=n.eq("profiles.rt",t.rt)),t.rw&&(n=n.eq("profiles.rw",t.rw));let{data:i,error:d}=await n;d&&console.error("Error fetching complaints:",d),$(i||[]);let o=C.from("profiles").select("*",{count:"exact",head:!0}).eq("role","user");t.rt&&(o=o.eq("rt",t.rt)),t.rw&&(o=o.eq("rw",t.rw));let{count:c}=await o;q(c||0)}catch(e){console.error("Error fetching data:",e)}finally{M(!1)}},en=(0,t.useMemo)(()=>{let e=E.reduce((e,a)=>e+(a.weight||0),0),a=E.reduce((e,a)=>e+(a.total_price||0),0);return{totalWeight:e,totalIncome:a,pendingPickup:E.filter(e=>"done"!==e.status).length,pendingComplaint:B.filter(e=>"Pending"===e.status).length}},[E,B]),ei=e=>{let a=(e||"").toLowerCase();return"done"===a||"selesai"===a||"resolved"===a?"bg-green-100 text-green-800 border-green-200":"in progress"===a||"proses"===a?"bg-blue-100 text-blue-800 border-blue-200":"pending"===a||"menunggu"===a?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-gray-100 text-gray-800 border-gray-200"},ed=async()=>{await C.auth.signOut(),e.push("/login")},eo=async e=>{if(!e||0===e.length)return void _.default.fire("Info","Tidak ada data untuk diexport","info");let a=e.map(e=>({Tanggal:new Date(e.created_at).toLocaleDateString("id-ID"),Warga:e.profiles?.full_name||"-",Alamat:e.profiles?.address||"-","Jenis Sampah":e.waste_types?.name||"-","Berat (kg)":e.weight,Nilai:(0,S.formatRupiah)(e.total_price||0),Status:e.status}));await (0,S.exportToExcel)(a,"laporan_rtrw")?_.default.fire("Sukses","Laporan berhasil diexport ke CSV!","success"):_.default.fire("Gagal","Gagal export laporan","error")},ec=async()=>{if(!Z.trim())return _.default.fire("Error","Respon tidak boleh kosong","warning");try{await C.from("complaints").update({response:Z,status:"Resolved"}).eq("id",V.id),_.default.fire("Terkirim","Tanggapan berhasil dikirim!","success"),Q(""),H(null),el()}catch(e){_.default.fire("Error",e.message,"error")}},ex=async e=>{e.preventDefault();try{await C.from("profiles").update({full_name:L.full_name,alamat:L.alamat}).eq("id",L.id),_.default.fire("Sukses","Profil RT/RW berhasil diperbarui!","success")}catch(e){_.default.fire("Error",e.message,"error")}},em=async e=>{let a=e.target.files[0];if(a)try{_.default.fire({title:"Mengupload...",text:"Mohon tunggu sebentar",allowOutsideClick:!1,didOpen:()=>_.default.showLoading()});let e=await (0,S.uploadAvatar)(a,L.id);if(!e)throw Error("Gagal mendapatkan URL gambar.");let{error:t}=await C.from("profiles").update({avatar_url:e}).eq("id",L.id);if(t)throw t;A(a=>({...a,avatar_url:e})),_.default.fire("Sukses","Foto profil berhasil diperbarui!","success")}catch(e){console.error(e),_.default.fire("Error","Gagal upload foto: "+e.message,"error")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 flex font-sans text-gray-800",children:[(0,a.jsxs)("aside",{className:`fixed z-30 h-full bg-white border-r border-gray-200 transition-all duration-300 ${z?"w-64":"w-20"} hidden md:flex flex-col`,children:[(0,a.jsxs)("div",{className:"h-20 flex items-center justify-between px-6 border-b border-gray-100",children:[(0,a.jsx)("div",{className:`flex items-center gap-3 transition-all duration-300 ${!z?"justify-center w-full px-0":"px-0"}`,children:z?(0,a.jsxs)("div",{className:"flex flex-col animate-in fade-in slide-in-from-left duration-300",children:[(0,a.jsx)("img",{src:"/images/logo.png",alt:"RecycleYuk",className:"w-36 h-auto object-contain mb-1"}),(0,a.jsx)("span",{className:"text-[10px] font-bold text-green-600 tracking-[0.2em] uppercase pl-1",children:"RT/RW Panel"})]}):(0,a.jsxs)("button",{onClick:()=>O(!0),className:"mx-auto relative group",children:[(0,a.jsx)("img",{src:"/images/mini-logo.png",alt:"RecycleYuk",className:"w-10 h-10 object-contain transition-transform group-hover:scale-110"}),(0,a.jsx)("div",{className:"absolute -right-2 -bottom-2 bg-green-100 text-green-600 rounded-full p-0.5 shadow-sm border border-white",children:(0,a.jsx)(y.ChevronRight,{size:12})})]})}),z&&(0,a.jsx)("button",{onClick:()=>O(!1),className:"p-2 hover:bg-gray-100 rounded-lg text-gray-500",children:(0,a.jsx)(j.ChevronLeft,{size:20})})]}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:es.map(e=>(0,a.jsxs)("button",{onClick:()=>x(e.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium ${s===e.id?"bg-emerald-50 text-emerald-700 shadow-sm":"text-gray-600 hover:bg-gray-50 hover:text-emerald-600"}`,children:[(0,a.jsx)(e.icon,{size:22,className:s===e.id?"text-emerald-600":"text-gray-400"}),z&&(0,a.jsx)("span",{children:e.label})]},e.id))}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-100",children:(0,a.jsxs)("button",{onClick:ed,className:"w-full flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 rounded-xl transition font-bold",children:[(0,a.jsx)(f.LogOut,{size:22})," ",z&&"Keluar"]})})]}),(0,a.jsx)("main",{className:`flex-1 p-4 md:p-8 transition-all duration-300 ${z?"md:ml-64":"md:ml-20"}`,children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-end md:items-center mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 capitalize",children:s}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Panel Kepala RT/RW"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 bg-white p-1 rounded-xl border border-gray-200 shadow-sm",children:[(0,a.jsxs)("button",{onClick:()=>x("pengaduan"),className:"p-2 rounded-lg hover:bg-gray-100 relative text-gray-600 group transition",children:[(0,a.jsx)(w.Bell,{size:20,className:"group-hover:text-green-600"}),B.filter(e=>"Pending"===e.status).length>0&&(0,a.jsx)("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border border-white animate-pulse"})]}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-200"}),(0,a.jsxs)("button",{onClick:()=>x("profile"),className:"flex items-center gap-3 pl-2 pr-3 py-1 rounded-lg hover:bg-gray-50 transition",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-700 font-bold border border-green-200 overflow-hidden",children:L?.avatar_url?(0,a.jsx)("img",{src:L.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):L?.full_name?.charAt(0)||"K"}),(0,a.jsxs)("div",{className:"text-left hidden md:block",children:[(0,a.jsx)("p",{className:"text-xs font-bold text-gray-800 line-clamp-1 max-w-[100px]",children:L?.full_name||"Kepala RT/RW"}),(0,a.jsx)("p",{className:"text-0 text-gray-500",children:"Administrator Utama"})]})]})]})]}),I&&!P?(0,a.jsxs)("div",{className:"h-96 flex flex-col items-center justify-center text-gray-400",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-emerald-200 border-t-emerald-600 rounded-full animate-spin mb-4"}),(0,a.jsx)("p",{children:"Memuat Sistem..."})]}):(()=>{switch(s){case"dashboard":return(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{label:"Total Sampah",val:`${en.totalWeight.toFixed(1)} Kg`,icon:i.Trash2,col:"emerald"},{label:"Pendapatan",val:`Rp ${en.totalIncome.toLocaleString()}`,icon:v.Wallet,col:"blue"},{label:"Warga Terdaftar",val:F,icon:n.Users,col:"purple"},{label:"Aduan Masuk",val:en.pendingComplaint,icon:m,col:"orange"}].map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex justify-between items-center hover:shadow-md transition",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:e.label}),(0,a.jsx)("h3",{className:`text-2xl font-bold mt-1 text-${e.col}-700`,children:e.val})]}),(0,a.jsx)("div",{className:`bg-${e.col}-50 p-3 rounded-full text-${e.col}-600`,children:(0,a.jsx)(e.icon,{size:24})})]},t))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,a.jsxs)("h3",{className:"font-bold text-lg text-gray-800 mb-6 flex items-center gap-2",children:[(0,a.jsx)(N,{size:20})," Grafik Sampah Bulanan"]}),(0,a.jsx)("div",{className:"h-64 flex items-end justify-between gap-2 px-2",children:[100,150,120,170,140,190,210,180,220,250,230,200].map((e,t)=>(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center group cursor-pointer",children:[(0,a.jsx)("div",{className:"w-full bg-emerald-500 rounded-t-sm hover:bg-emerald-600 transition-all relative",style:{height:`${e/300*100}%`},children:(0,a.jsxs)("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-black text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition whitespace-nowrap z-10",children:[e," Kg"]})}),(0,a.jsx)("span",{className:"text-[10px] text-gray-500 mt-2",children:t+1})]},t))})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,a.jsxs)("h3",{className:"font-bold text-lg text-gray-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(u.AlertCircle,{size:20})," Perlu Perhatian"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-100",children:[(0,a.jsx)("p",{className:"text-orange-800 font-bold text-sm",children:"Pickup Pending"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-orange-600 mt-1",children:en.pendingPickup}),(0,a.jsx)("p",{className:"text-xs text-orange-500 mt-1",children:"Transaksi belum diselesaikan driver"})]}),(0,a.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg border border-red-100",children:[(0,a.jsx)("p",{className:"text-red-800 font-bold text-sm",children:"Komplain Baru"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-red-600 mt-1",children:en.pendingComplaint}),(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Menunggu tanggapan RT/RW"})]})]})]})]})]});case"monitoring":let e;return e=E.filter(e=>("All"===J||e.status===J)&&(""===K||(e.profiles?.full_name||"").toLowerCase().includes(K.toLowerCase()))),(0,a.jsx)("div",{className:"space-y-6 animate-in slide-in-from-right",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Monitoring Transaksi Global"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Search,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),(0,a.jsx)("input",{className:"pl-10 pr-4 py-2 border rounded-lg text-sm bg-gray-50 outline-none text-gray-800",placeholder:"Cari nama warga...",value:K,onChange:e=>G(e.target.value)})]}),(0,a.jsxs)("select",{className:"border rounded-lg px-3 py-2 text-sm bg-gray-50 outline-none text-gray-800",value:J,onChange:e=>U(e.target.value),children:[(0,a.jsx)("option",{value:"All",children:"Semua Status"}),(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"In Progress",children:"Proses"}),(0,a.jsx)("option",{value:"done",children:"Selesai"})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"ID"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Warga"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Lokasi"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Driver"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Berat"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Status"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Aksi"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"p-4 text-gray-500 font-mono text-xs",children:e.id.slice(0,8)}),(0,a.jsx)("td",{className:"p-4 font-bold text-gray-800",children:e.profiles?.full_name}),(0,a.jsx)("td",{className:"p-4 text-gray-600",children:e.profiles?.alamat||e.profiles?.address||"-"}),(0,a.jsx)("td",{className:"p-4 text-gray-800 font-medium",children:e.driver_name||"-"}),(0,a.jsxs)("td",{className:"p-4 text-gray-800",children:[e.weight," Kg"]}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("span",{className:`px-2 py-1 rounded text-xs font-bold border ${ei(e.status)}`,children:e.status})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("button",{onClick:()=>X(e),className:"text-blue-600 bg-blue-50 p-2 rounded hover:bg-blue-100",children:(0,a.jsx)(h.Eye,{size:16})})})]},e.id))})]})})]})});case"laporan":let t;return t=E.filter(e=>{let a=new Date(e.created_at),t=a.toISOString().split("T")[0];return"daily"===ee?t===et.date:"monthly"===ee?a.getMonth()+1===parseInt(et.month)&&a.getFullYear()===parseInt(et.year):"yearly"===ee?a.getFullYear()===parseInt(et.year):"custom"!==ee||!et.startDate||!et.endDate||t>=et.startDate&&t<=et.endDate}),(0,a.jsx)("div",{className:"space-y-6 animate-in slide-in-from-right",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:"Laporan & Analitik"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>eo(t),className:"flex items-center gap-2 border px-4 py-2 rounded-lg text-sm hover:bg-gray-50 text-gray-700 font-medium",children:[(0,a.jsx)(p.FileText,{size:16})," Excel"]}),(0,a.jsxs)("button",{onClick:()=>window.print(),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-emerald-700 font-bold",children:[(0,a.jsx)(c.Download,{size:16})," PDF"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Tipe Laporan"}),(0,a.jsxs)("select",{className:"w-full border rounded p-2 text-sm bg-gray-50 text-gray-800",value:ee,onChange:e=>ea(e.target.value),children:[(0,a.jsx)("option",{value:"daily",children:"Harian"}),(0,a.jsx)("option",{value:"monthly",children:"Bulanan"}),(0,a.jsx)("option",{value:"yearly",children:"Tahunan"}),(0,a.jsx)("option",{value:"custom",children:"Range Tanggal"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:"Periode Waktu"}),(0,a.jsxs)("div",{className:"flex gap-2",children:["daily"===ee&&(0,a.jsx)("input",{type:"date",className:"w-full border rounded p-2 text-sm bg-gray-50 text-gray-800",value:et.date,onChange:e=>er({...et,date:e.target.value})}),"monthly"===ee&&(0,a.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,a.jsx)("select",{className:"w-1/2 border rounded p-2 text-sm bg-gray-50 text-gray-800",value:et.month,onChange:e=>er({...et,month:e.target.value}),children:[...Array(12)].map((e,t)=>(0,a.jsx)("option",{value:t+1,children:new Date(0,t).toLocaleString("id-ID",{month:"long"})},t+1))}),(0,a.jsx)("input",{type:"number",className:"w-1/2 border rounded p-2 text-sm bg-gray-50 text-gray-800",value:et.year,onChange:e=>er({...et,year:e.target.value})})]}),"yearly"===ee&&(0,a.jsx)("input",{type:"number",className:"w-full border rounded p-2 text-sm bg-gray-50 text-gray-800",value:et.year,onChange:e=>er({...et,year:e.target.value})}),"custom"===ee&&(0,a.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,a.jsx)("input",{type:"date",className:"w-1/2 border rounded p-2 text-sm bg-gray-50 text-gray-800",value:et.startDate,onChange:e=>er({...et,startDate:e.target.value})}),(0,a.jsx)("input",{type:"date",className:"w-1/2 border rounded p-2 text-sm bg-gray-50 text-gray-800",value:et.endDate,onChange:e=>er({...et,endDate:e.target.value})})]})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Tanggal"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Warga"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Jenis"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Berat"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Nilai"}),(0,a.jsx)("th",{className:"p-4 text-gray-600",children:"Status"})]})}),(0,a.jsx)("tbody",{children:t.length>0?t.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"p-4 text-gray-800",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"p-4 text-gray-800 font-medium",children:e.profiles?.full_name}),(0,a.jsx)("td",{className:"p-4 text-gray-600",children:e.waste_types?.name}),(0,a.jsxs)("td",{className:"p-4 text-gray-800 font-bold",children:[e.weight," kg"]}),(0,a.jsxs)("td",{className:"p-4 text-gray-800",children:["Rp ",e.total_price?.toLocaleString()]}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("span",{className:`px-2 py-1 rounded text-xs font-bold border ${ei(e.status)}`,children:e.status})})]},t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"6",className:"p-8 text-center text-gray-400",children:"Data tidak ditemukan."})})})]})})]})});case"pengaduan":return(0,a.jsx)("div",{className:"space-y-6 animate-in slide-in-from-right",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-gray-800 mb-6",children:"Pusat Pengaduan Masyarakat"}),(0,a.jsx)("div",{className:"space-y-4",children:0===B.length?(0,a.jsx)("p",{className:"text-center text-gray-400 py-8",children:"Belum ada pengaduan masuk."}):B.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-xl p-5 hover:shadow-md transition bg-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"font-bold text-gray-800 text-lg",children:e.subject}),(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-bold border ${"Resolved"===e.status?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200"}`,children:e.status})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Oleh: ",(0,a.jsx)("span",{className:"font-bold",children:e.profiles?.full_name||"Anonim"})," â€¢ ",new Date(e.created_at).toLocaleDateString()]})]}),"Pending"===e.status&&(0,a.jsxs)("button",{onClick:()=>H(e),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-blue-700",children:[(0,a.jsx)(b.Send,{size:14})," Tanggapi"]})]}),(0,a.jsxs)("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100 text-sm italic",children:['"',e.content,'"']}),e.response&&(0,a.jsxs)("div",{className:"mt-3 pl-4 border-l-4 border-emerald-500",children:[(0,a.jsx)("p",{className:"text-xs text-emerald-600 font-bold mb-1",children:"Tanggapan RT/RW:"}),(0,a.jsx)("p",{className:"text-sm text-gray-800",children:e.response})]})]},e.id))})]})});case"profile":return(0,a.jsx)("div",{className:"max-w-2xl mx-auto animate-in slide-in-from-right",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6 mb-8 pb-8 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>document.getElementById("rtrw-avatar-upload").click(),children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-emerald-100 rounded-full flex items-center justify-center text-4xl font-bold text-emerald-600 overflow-hidden border-4 border-emerald-50",children:L?.avatar_url?(0,a.jsx)("img",{src:L.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):L?.full_name?.charAt(0)||"K"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:(0,a.jsx)(k.Edit2,{className:"text-white",size:20})})]}),(0,a.jsx)("input",{type:"file",id:"rtrw-avatar-upload",className:"hidden",accept:"image/*",onChange:em}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:L?.full_name}),(0,a.jsx)("p",{className:"text-gray-500",children:L?.email}),(0,a.jsx)("span",{className:"inline-block mt-2 px-3 py-1 rounded-full text-xs font-bold bg-emerald-100 text-emerald-700",children:"Kepala RT/RW"})]})]}),(0,a.jsxs)("form",{onSubmit:ex,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Nama Lengkap"}),(0,a.jsx)("input",{className:"w-full border p-3 rounded-lg text-gray-800 bg-gray-50 focus:ring-2 ring-emerald-500 outline-none",value:L?.full_name||"",onChange:e=>A({...L,full_name:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Alamat Kantor"}),(0,a.jsx)("textarea",{className:"w-full border p-3 rounded-lg text-gray-800 bg-gray-50 focus:ring-2 ring-emerald-500 outline-none h-24 resize-none",value:L?.alamat||"",onChange:e=>A({...L,alamat:e.target.value})})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 transition mt-4",children:"Simpan Perubahan"})]})]})});default:return(0,a.jsx)("div",{children:"Halaman tidak ditemukan"})}})()]})}),V&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-4 border-b pb-4",children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:"Tanggapi Pengaduan"}),(0,a.jsx)("button",{onClick:()=>H(null),children:(0,a.jsx)(g.X,{size:20,className:"text-gray-400"})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded mb-4 text-sm border border-gray-200",children:[(0,a.jsx)("p",{className:"font-bold text-gray-700 mb-1",children:"Pesan Masuk:"}),(0,a.jsxs)("p",{className:"italic text-gray-600",children:['"',V.content,'"']})]}),(0,a.jsx)("textarea",{className:"w-full border border-gray-300 rounded-lg p-3 text-sm h-32 outline-none focus:ring-2 focus:ring-emerald-500 text-gray-800 bg-white",placeholder:"Tulis instruksi atau tanggapan resmi RT/RW...",value:Z,onChange:e=>Q(e.target.value)}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>H(null),className:"px-4 py-2 border border-gray-300 rounded text-gray-700 font-medium hover:bg-gray-50",children:"Batal"}),(0,a.jsxs)("button",{onClick:ec,className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 flex items-center gap-2 font-bold",children:[(0,a.jsx)(b.Send,{size:14})," Kirim Tanggapan"]})]})]})}),Y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-4 border-b pb-4",children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:"Detail Transaksi"}),(0,a.jsx)("button",{onClick:()=>X(null),children:(0,a.jsx)(g.X,{size:20,className:"text-gray-400 hover:text-red-500"})})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm text-gray-700",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("span",{className:"font-medium text-gray-500",children:"ID"}),(0,a.jsx)("span",{className:"col-span-2 font-mono text-xs bg-gray-100 p-1 rounded w-fit",children:Y.id})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("span",{className:"font-medium text-gray-500",children:"Warga"}),(0,a.jsx)("span",{className:"col-span-2 font-bold",children:Y.profiles?.full_name})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("span",{className:"font-medium text-gray-500",children:"Alamat"}),(0,a.jsx)("span",{className:"col-span-2",children:Y.profiles?.address||Y.profiles?.alamat})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("span",{className:"font-medium text-gray-500",children:"Berat"}),(0,a.jsxs)("span",{className:"col-span-2 font-bold",children:[Y.weight," kg"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("span",{className:"font-medium text-gray-500",children:"Total Biaya"}),(0,a.jsxs)("span",{className:"col-span-2 text-emerald-600 font-bold",children:["Rp ",Y.total_price?.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("span",{className:"font-medium text-gray-500",children:"Status"}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-xs border font-bold ${ei(Y.status)}`,children:Y.status})})]})]})]})})]})}e.s(["default",()=>P],24565)}]);